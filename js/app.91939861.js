(function(t){function e(e){for(var r,s,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)s=i[d],n[s]&&p.push(n[s][0]),n[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],r=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},n={app:0},o=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/eduvis/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var r=a("9e74"),n=a.n(r);n.a},"099f":function(t,e,a){},"1be3":function(t,e,a){t.exports=a.p+"img/rdbu.5a7de3a4.jpg"},"2ad9":function(t,e,a){"use strict";var r=a("d9c0"),n=a.n(r);n.a},"31d2":function(t,e,a){"use strict";var r=a("6f34"),n=a.n(r);n.a},3932:function(t,e,a){},"3da8":function(t,e,a){},"3dc7":function(t,e,a){"use strict";var r=a("3da8"),n=a.n(r);n.a},"4dc8":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("3e2e"),a("c29f"),a("ea5e"),a("1f70");var r=a("6e6d"),n=a("dd54"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal",router:""}},[a("el-menu-item",{attrs:{id:"a1"},on:{click:t.routechange}},[t._v("EDUIVS")]),t._l(t.second,function(e,r){return a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:e.second,expression:"item.second"}],key:r,attrs:{index:e.name,id:e.class}},[a("template",{slot:"title"},[t._v(t._s(e.navItem))]),t._l(e.second,function(e,r){return a("el-menu-item",{key:r,attrs:{index:e.name}},[t._v(t._s(e.navItem))])}),a("el-menu-item",[a("el-button",{attrs:{type:"text"},on:{click:t.open}},[t._v("班级")])],1)],2)}),t._l(t.navList,function(e,r){return a("el-menu-item",{key:r,attrs:{index:e.name,id:e.class}},[t._v("\n            "+t._s(e.navItem)+"\n        ")])}),a("el-menu-item",[a("el-input",{staticClass:"input",attrs:{placeholder:"输入需要查询的学生id",size:"media"},model:{value:t.studentid,callback:function(e){t.studentid=e},expression:"studentid"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchStudent},slot:"append"})],1)],1),"/Cos"==this.$route.path|"/Choose"==this.$route.path?a("el-menu-item",{staticStyle:{display:"flex"}},[a("div",{staticClass:"circles"},[a("div",{staticStyle:{"background-color":"#6e9cd6"},attrs:{id:"sexcircle"}},[t._v("男")]),a("div",{staticStyle:{"background-color":"#f8d7d3"},attrs:{id:"sexcircle"}},[t._v("女")]),"/Cos"==this.$route.path?a("div",{staticStyle:{"background-color":"#6e9cd6"},attrs:{id:"borderCircle"}},[t._v("住校男")]):t._e(),"/Cos"==this.$route.path?a("div",{staticStyle:{"background-color":"#f8d7d3"},attrs:{id:"borderCircle"}},[t._v("住校女")]):t._e(),"/Choose"==this.$route.path?a("img",{staticStyle:{height:"20px",width:"90px","padding-top":"20px"},attrs:{src:"mock/colormap.png"}}):t._e()])]):t._e(),"/Home"==this.$route.path|"/class"==this.$route.path?a("el-menu-item",[a("div",{staticClass:"circles"},[a("div",{staticStyle:{"background-color":"#8dd3c7"},attrs:{id:"circle"}},[t._v("迟到_晚到")]),a("div",{staticStyle:{"background-color":"#ffffb3"},attrs:{id:"circle"}},[t._v("校徽_早退")]),a("div",{staticStyle:{"background-color":"#bebada"},attrs:{id:"circle"}},[t._v("操场考勤机")]),a("div",{staticStyle:{"background-color":"#fbd462"},attrs:{id:"circle"}},[t._v("迟到[移动]")]),a("div",{staticStyle:{"background-color":"#80b1d3"},attrs:{id:"circle"}},[t._v("校服[移动]")]),a("div",{staticStyle:{"background-color":"#fb8072"},attrs:{id:"circle"}},[t._v("早退[移动]")]),a("div",{staticStyle:{"background-color":"#b3de69"},attrs:{id:"circle"}},[t._v("离校[移动]")]),a("div",{staticStyle:{"background-color":"#fccde5"},attrs:{id:"circle"}},[t._v("进校[移动]")])])]):t._e(),"/Choose"==this.$route.path?a("el-menu-item",[a("div",{attrs:{id:"chooseColor"}})]):t._e()],2),a("router-view")],1)},s=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"chart"}})},l=[],c=(a("1b79"),a("c5cf")),u={name:"multiLine",props:["gradeData"],mounted:function(){this.getLine()},created:function(){},methods:{getLine:function(){var t=this.gradeData;c["L"]("%Y");t.forEach(function(t){console.log(t)})}}},d=u,p=(a("cd56"),a("17cc")),h=Object(p["a"])(d,i,l,!1,null,null,null),v=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"help"},[a("el-button",{attrs:{round:"",id:"helpbutton"}},[t._v("引导")])],1),a("classkq",{attrs:{classid:this.$route.query.id},on:{chooseStudent:t.selectStudent}}),a("div",{staticClass:"select"},[a("p",{staticStyle:{"font-size":"30px","margin-right":"50px"}},[t._v(t._s(t.className))]),a("p",{staticStyle:{"font-size":"30px","margin-right":"50px"}},[t._v("成绩")]),t._m(0),t._m(1),a("div",{staticClass:"class"},[a("el-select",{attrs:{placeholder:"寝室"},on:{change:t.selectDorm},model:{value:t.dormaryid,callback:function(e){t.dormaryid=e},expression:"dormaryid"}},t._l(t.dormId,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}},[a("span",[t._v(t._s(e))])])}),1)],1),a("div",{staticClass:"type"},[a("el-select",{attrs:{placeholder:"学生"},on:{change:t.selectStudent},model:{value:t.studentid,callback:function(e){t.studentid=e},expression:"studentid"}},t._l(t.studentId,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"文理科成绩"},on:{change:t.changeLinkType},model:{value:t.select_type,callback:function(e){t.select_type=e},expression:"select_type"}}),a("div",{attrs:{id:"container"}},[a("div",{directives:[{name:"move",rawName:"v-move"}],attrs:{id:"students"}})])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{color:"black"},attrs:{id:"vis","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}})],1)},b=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"colormap",staticStyle:{"margin-right":"40px"}},[r("p",[t._v("排名变化")]),r("img",{staticStyle:{height:"10px",width:"120px",opacity:"0.6"},attrs:{src:a("1be3")}}),r("p",[t._v("下降 <------\x3e 上升")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"circles"},[t._v("男\n              "),a("div",{staticStyle:{"background-color":"#6e9cd6"},attrs:{id:"sexcircle"}}),t._v(" 女\n              "),a("div",{staticStyle:{"background-color":"#f8d7d3"},attrs:{id:"sexcircle"}}),t._v(" 住校男\n              "),a("div",{staticStyle:{"background-color":"#6e9cd6"},attrs:{id:"borderCircle"}}),t._v("住校女\n              "),a("div",{staticStyle:{"background-color":"#f8d7d3"},attrs:{id:"borderCircle"}})])}],m=(a("46b7"),a("6b50"),a("0cf5"),a("73c0"),a("fb59"),a("7209"),a("370b"),a("a65c")),g=a.n(m),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"studentinfo"}},[r("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"box-shadow":"rgba(0, 0, 0, 0.12) 0px 2px 4px"},attrs:{span:10}},[r("div",{staticClass:"ele",attrs:{id:"summary"}},[r("div",{attrs:{id:"info"}},["女"==t.studentSex?r("div",{staticClass:"infoitem"},[r("img",{staticClass:"seximg",attrs:{src:a("96c2")}})]):"男"==t.studentSex?r("div",{staticClass:"infoitem"},[r("img",{staticClass:"seximg",attrs:{src:a("b16e")}})]):t._e(),r("div",{staticClass:"infoitem"},[r("table",{attrs:{id:"box-table-b",summary:"Most Favorit Movies"}},[r("tbody",[r("tr",[r("th",{attrs:{scope:"row"}},[t._v("学生ID")]),r("td",[t._v(t._s(t.studentId))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("学生姓名")]),r("td",[t._v(t._s(t.studentName))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("性别")]),r("td",[t._v(t._s(t.studentSex))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("学生班级")]),r("td",[t._v(t._s(t.studentCla))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("政治面貌")]),r("td",[t._v(t._s(t.polic))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("学生住址")]),r("td",[t._v(t._s(t.studentAd))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("宿舍")]),r("td",[t._v(t._s(t.studentroom))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("是否退学")]),r("td",[t._v(t._s(t.leaveSchool))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("成绩排名")]),r("td",[t._v(t._s(t.grademean))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("成绩浮动")]),r("td",[t._v(t._s(t.gradevar))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("消费")]),r("td",[t._v(t._s(t.cos))])]),r("tr",[r("th",{attrs:{scope:"row"}},[t._v("考勤")]),r("td",[t._v(t._s(t.kq))])])])])])]),r("studentGradeSum",{attrs:{studentId:this.studentId,choose:this.choose}})],1)]),r("el-col",{attrs:{span:18}},[r("div",{staticClass:"detail"},[r("studentGrade",{attrs:{studentId:this.studentId},on:{trans:t.transChoose}}),r("studentCos",{attrs:{studentId:this.studentId}}),r("studentKq",{attrs:{studentId:this.studentId}})],1)])],1)],1)},x=[],_=(a("3596"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"ele",staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12)"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("div",{staticStyle:{"margin-top":"5%"},attrs:{id:"chart"}},[a("div",{staticStyle:{"margin-left":"30%"},attrs:{id:"select"}},[a("el-select",{on:{change:t.getValue},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{value:""}},[t._v("--请选择--")]),a("el-option",{attrs:{value:"Scoringrate",selected:"selected",label:"得分率"}},[t._v(" 得分率 ")]),a("el-option",{attrs:{value:"mes_T_Score",label:"T-Score"}},[t._v(" T-Score ")]),a("el-option",{attrs:{value:"mes_Z_Score",label:"Z-Score"}},[t._v(" Z-Score ")]),a("el-option",{attrs:{value:"mes_dengdi",label:"等第"}},[t._v(" 等第 ")]),a("el-option",{attrs:{value:"graderank",label:"年级排名"}},[t._v(" 年级排名 ")]),a("el-option",{attrs:{value:"classrank",label:"班级排名"}},[t._v(" 班级排名 ")])],1),a("p",[t._v("七选三:"+t._s(t.choose))])],1)]),t.studentInfo?a("div",[t._v("\n                        国际班学生无成绩信息\n        ")]):t._e()])}),k=[],w=a("63e0"),C=a.n(w),S=a("7f43"),I=a.n(S);r["a"].prototype.axios=I.a;var D={name:"studentGrade",props:["studentId"],data:function(){return{scoreType:"Scoringrate",choose:"",loading:!0,studentInfo:!1,select:""}},mounted:function(){c["E"](".toprightchoose").remove(),c["E"](".toprightcos").remove();var t=this;I.a.get("http://cuteanian.top/eduvis/mock/studentScore_57.json").then(function(e){t.studentdata=e.data,void 0==t.studentdata[t.studentId]?t.studentInfo="国际班学生暂无成绩信息":t.drawEchartMul(t.studentdata[t.studentId]),t.loading=!1})},methods:{getValue:function(){c["D"]("#chart").selectAll("svg").remove(),this.scoreType=this.select,this.drawEchartMul(this.studentdata[this.studentId])},drawEchartMul:function(t){var e=.4*window.innerWidth,a=.15*window.innerWidth,r=0,n=80,o=250,s=(r=40,"0.25"),i="0.85",l="0.1",u="3.5px",d="2.5px",p="0.85",h="0.25",v=5,f=6,b={"数学":"#a6cee3","语文":"#1f78b4","英语":"#b2df8a","化学":"#33a02c","物理":"#fb9a99","生物":"#e31a1c","政治":"#fdbf6f","地理":"#ff7f00","历史":"#cab2d6","技术":"#ffff99","总分":"#6a3d9a"},m=this.scoreType,g=[];t.forEach(function(t,e){var a=t["mes_sub_name"];t.scores.forEach(function(t,e){305==t["exam_number"]&"语文"!=a&"数学"!=a&"英语"!=a&"总分"!=a&&g.push(a)})});for(var y=0;y<3;y++)void 0==g[y]&&(g[y]="未知");this.choose=g[0]+","+g[1]+","+g[2],this.$emit("trans",this.choose);for(var x=c["D"]("body").append("div").attr("class","tooltip").style("opacity",0),_=(this.studentId,["2016学年度第一学期期中考试","2016学年度第一学期期末考试","2016学年度第一学期期末总评","2016学年度第二学期期中考试","2016学年度第二学期期末考试","2016学年度第二学期总评","2017学年度第一学期期中考试","\t2017学年度第一学期期末考试","2017学年度第一学期期末总评","2017学年度第二学期期中考试","2017学年度第二学期期末考试","2017学年第二学期期末总评","2018学年第一学期高三十校联考","2018学年第一学期高三五校联考","2018-1学期期中考试","2018-1学期期末考试(预测值)"]),k=[],w=10,C=0;C<_.length;C++)k.push(w),w+=(e-100)/_.length;var S=c["B"]().domain(_).range(k);function I(t,e){return parseInt(t.exam_number)-parseInt(e.exam_number)}this.studentdata[this.studentId].forEach(function(t){t.scores.sort(I)});var D=[];switch(this.scoreType){case"Scoringrate":D=[0,100];break;case"mes_Z_Score":D=[-6,6];break;case"mes_T_Score":D=[0,100];break;case"mes_dengdi":D=[0,1];break;case"graderank":D=[0,500];break;case"classrank":D=[0,60];break}var E=c["A"]().domain(D).range([a-n,0]);"graderank"!=this.scoreType&&"classrank"!=this.scoreType&&"mes_dengdi"!=this.scoreType||E.range([0,a-n+20]);var A=c["D"]("#chart").append("svg").attr("width",e+n+"px").attr("height",a+n+"px").append("g").attr("transform","translate(".concat(n,", ").concat(r,")"));function T(){c["E"](".line").style("opacity",l),c["E"](".circle").style("opacity",h),c["D"](this).style("opacity",i).style("stroke-width",d).style("cursor","pointer")}function L(){c["E"](".line").style("opacity",s),c["E"](".circle").style("opacity",p),c["D"](this).style("stroke-width",u).style("cursor","none")}var q=c["q"]().curve(c["j"]).x(function(t){return S(t.exam_numname)}).y(function(t){return"mes_dengdi"==m&t[m]>1?E(t[m]/100):"mes_dengdi"==m&0==t[m]?E(100):E(t[m])}),N=A.append("g").attr("class","lines");N.selectAll(".line-group").data(t).enter().append("g").attr("class","line-group").on("mouseover",function(t,a){A.append("text").attr("class","title-text").style("fill",b[t["mes_sub_name"]]).text(t.name).attr("text-anchor","middle").attr("x",(e-n)/2).attr("y",5)}).on("mouseout",function(t){A.select(".title-text").remove()}).append("path").attr("class","line").attr("id",function(t,e){return"line"+parseInt(t.mes_sub_id)}).attr("d",function(t,e){return q(t.scores)}).style("stroke",function(t,e){return b[t["mes_sub_name"]]}).style("opacity",s).on("mouseover",T).on("mouseout",L).on("click",T),N.selectAll("circle-group").data(t).enter().append("g").style("fill",function(t,e){return b[t["mes_sub_name"]]}).attr("name",function(t,e){return t["mes_sub_name"]}).attr("subid",function(t,e){return t["mes_sub_id"]}).selectAll("circle").data(function(t,e){return t.scores}).enter().append("g").attr("class","circle").on("mouseover",function(t){var e=this.parentNode.getAttribute("name");x.transition().duration(200).style("opacity",.9),x.html(function(){var a="";switch(m){case"Scoringrate":a=t["exam_numname"]+"</br>"+e+"得分率"+(t[m]/100).toFixed(2);break;case"mes_Z_Score":a=t["exam_numname"]+"</br>"+e+"Z-Score"+t[m].toFixed(2);break;case"mes_T_Score":a=t["exam_numname"]+"</br>"+e+"T-Score"+t[m].toFixed(2);break;case"mes_dengdi":a=t["exam_numname"]+"</br>"+e+"等第"+t[m].toFixed(2);break;case"graderank":a=t["exam_numname"]+"</br>"+e+"年级排名"+t[m];break;case"classrank":a=t["exam_numname"]+"</br>"+e+"班级排名"+t[m];break}return a}).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px")}).on("mouseout",function(t){x.transition().duration(500).style("opacity",0)}).append("circle").attr("class",function(t,e){var a=this.parentNode.parentNode.getAttribute("subid");return"circle"+a}).attr("cx",function(t){return S(t.exam_numname)}).attr("cy",function(t,e){return"mes_dengdi"==m&t[m]>1?E(t[m]/100):"mes_dengdi"==m&0==t[m]?E(100):E(t[m])}).attr("r",v).style("opacity",p).on("mouseover",function(t){c["D"](this).transition().duration(o).attr("r",f)}).on("mouseout",function(t){c["D"](this).transition().duration(o).attr("r",v)});var j=c["b"](S).ticks(16).tickValues([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),z=c["c"](E).ticks(5),B=this;A.append("g").attr("class","x axis").attr("transform",function(t,e){var r=0;switch(B.scoreType){case"mes_dengdi":r=20;break;case"graderank":r=20;break;case"classrank":r=20;break}return"translate(0, ".concat(a-n+r,")")}).call(j).selectAll("text"),A.append("g").attr("class","y axis").call(z).append("text").attr("y",15).attr("transform","rotate(-90)").attr("fill","#000");var $=function(a){var r=a.attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").attr("transform","translate(".concat(e,",0)")).selectAll("g").data(t).join("g").attr("transform",function(t,e){return"translate(0,".concat(20*e,")")});r.append("rect").attr("x",-19).attr("width",19).attr("height",19).attr("fill",function(t,e){return b[t["mes_sub_name"]]}).on("click",function(t,e){c["E"](".line").style("opacity",l);c["D"]("#line"+parseInt(t.mes_sub_id)).style("opacity",i).style("stroke-width",d).style("cursor","pointer")}),r.append("text").attr("x",-24).attr("y",9.5).attr("dy","0.35em").text(function(t){return t.mes_sub_name})};A.append("g").call($)}}},E=D,A=(a("3dc7"),Object(p["a"])(E,_,k,!1,null,null,null)),T=A.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"radarChart"}),a("div",{staticClass:"buttons"},[a("button",{staticClass:"button",staticStyle:{"background-color":"#8dd3c7"},on:{click:t.changeall}},[t._v("总体")]),a("button",{staticClass:"button",staticStyle:{"background-color":"#ffffb3"},on:{click:t.changefinal}},[t._v("期末")]),a("button",{staticClass:"button",staticStyle:{"background-color":"#bebada"},on:{click:t.changemiddle}},[t._v("期中")]),a("button",{staticClass:"button",staticStyle:{"background-color":"white"},on:{click:t.change}},[t._v("还原")])])])},q=[],N=a("3d92");a("e71a");r["a"].prototype.axios=I.a;var j={name:"studentGradeSum",props:["studentId","choose"],data:function(){return{studentGradeSum:"",totaldata:[],finaldata:[],middledata:[],data:[]}},mounted:function(){var t=this;I.a.get("http://cuteanian.top/eduvis/mock/studentScore_57.json").then(function(e){t.studentdata=e.data;var a=t.studentdata[t.studentId],r=[],n=[],o=[],s=[279,288,298,267],i=[284,304,265,271];a.forEach(function(t){if("总分"!=t["mes_sub_name"]){var e=t["mes_sub_name"],a=t["scores"],l=[],c=[],u=[],d={},p={},h={};a.forEach(function(t){var e=t["Scoringrate"];l.push(e);var a=t["exam_number"];s.indexOf(a)>=0?u.push(e):i.indexOf(a)&&c.push(e)});var v=function(t){return t.reduce(function(t,e){return t+e},0)/t.length};d["axis"]=e,p["axis"]=e,h["axis"]=e,d["value"]=v(l),p["value"]=v(u),h["value"]=v(c),console.log(d),r.push(d),o.push(p),n.push(h)}});var l=[{name:0,axes:r},{name:1,axes:o},{name:2,axes:n}];t.data=l,t.finaldata=[l[1]],t.middledata=[l[2]],t.totaldata=[l[0]],t.drawradar(l,t.chooses)})},computed:{data:function(){},chooses:function(){return this.choose+" "}},methods:{changeall:function(){c["E"](".radarWrapper").remove();var t=0,e=[];this.data.forEach(function(a,r){0==a.name?t=1:e.push(a)}),console.log(t),0==t&&e.push(this.totaldata[0]),this.data=e,console.log(this.data),this.drawradar(e,this.chooses)},changefinal:function(){c["E"](".radarWrapper").remove();var t=0,e=[];this.data.forEach(function(a,r){1==a.name?t=1:e.push(a)}),console.log(t),0==t&&e.push(this.finaldata[0]),this.data=e,console.log(this.data),this.drawradar(e,this.chooses)},changemiddle:function(){c["E"](".radarWrapper").remove();var t=0,e=[];this.data.forEach(function(a,r){2==a.name?t=1:e.push(a)}),console.log(t),0==t&&e.push(this.middledata[0]),this.data=e,console.log(this.data),this.drawradar(e,this.chooses)},change:function(){c["E"](".radarWrapper").remove();var t=[this.totaldata[0],this.finaldata[0],this.middledata[0]];this.data=t,this.drawradar(t,this.chooses)},drawradar:function(t,e){var a={top:50,right:80,bottom:50,left:80},r=(window.innerWidth,window.innerWidth,{w:.1*window.innerWidth,h:.1*window.innerWidth,margin:a,levels:5,roundStrokes:!0,format:".0f"});this.RadarChart(".radarChart",t,r,e,"value")},RadarChart:function(t,e,a,r,n){var o=[],s=this.studentdata[this.studentId];s.forEach(function(t,e){var a=t["mes_sub_name"];t.scores.forEach(function(t,e){305==t["exam_number"]&"语文"!=a&"数学"!=a&"英语"!=a&"总分"!=a&&o.push(a)})});Math.max;var i=Math.sin,l=Math.cos,u=Math.PI/2,d=function(t,e){t.each(function(){var t,a=c["D"](this),r=a.text().split(/\s+/).reverse(),n=[],o=0,s=1.4,i=a.attr("y"),l=a.attr("x"),u=parseFloat(a.attr("dy")),d=a.text(null).append("tspan").attr("x",l).attr("y",i).attr("dy",u+"em");while(t=r.pop())n.push(t),d.text(n.join(" ")),d.node().getComputedTextLength()>e&&(n.pop(),d.text(n.join(" ")),n=[t],d=a.append("tspan").attr("x",l).attr("y",i).attr("dy",++o*s+u+"em").text(t))})},p={w:.3*window.innerWidth,h:.3*window.innerWidth,margin:{top:20,right:20,bottom:20,left:20},levels:3,maxValue:0,labelFactor:1.25,wrapWidth:60,opacityArea:.35,dotRadius:8,opacityCircles:.1,strokeWidth:2,color:["#8dd3c7","#ffffb3","#bebada"],roundStrokes:!1,format:".2%",unit:"",legend:!1};if("undefined"!==typeof a)for(var h in a)"undefined"!==typeof a[h]&&(p[h]=a[h]);for(var v=0,f=0;f<e.length;f++)for(var b=0;b<e[f].axes.length;b++)e[f].axes[b]["id"]=e[f].name,e[f].axes[b]["value"]>v&&(v=e[f].axes[b]["value"]);v=100;var m=e[0].axes.map(function(t,e){return t.axis}),g=m.length,y=Math.min(p.w/2,p.h/2),x=c["m"](p.format),_=2*Math.PI/g,k=c["A"]().range([0,y]).domain([0,v]),w=c["D"](t);w.select("svg").remove();var C=w.append("svg").attr("width",p.w+p.margin.left+p.margin.right).attr("height",p.h+p.margin.top+p.margin.bottom).attr("class","radar"),S=C.append("g").attr("transform","translate("+(p.w/2+p.margin.left)+","+(p.h/2+p.margin.top)+")"),I=S.append("defs").append("filter").attr("id","glow"),D=(I.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur"),I.append("feMerge")),E=(D.append("feMergeNode").attr("in","coloredBlur"),D.append("feMergeNode").attr("in","SourceGraphic"),S.append("g").attr("class","axisWrapper"));E.selectAll(".levels").data(c["y"](1,p.levels+1).reverse()).enter().append("circle").attr("class","gridCircle").attr("r",function(t){return y/p.levels*t}).style("fill","#CDCDCD").style("stroke",function(t,e){return 3==t?"red":"#CDCDCD"}).style("fill-opacity",p.opacityCircles).style("filter","url(#glow)"),E.selectAll(".axisLabel").data(c["y"](1,p.levels+1).reverse()).enter().append("text").attr("class","axisLabel").attr("x",4).attr("y",function(t){return-t*y/p.levels}).attr("dy","0.4em").style("font-size","10px").attr("fill","#737373").text(function(t){return x(v*t/p.levels)+p.unit});var A=E.selectAll(".axis").data(m).enter().append("g").attr("class","axis");A.append("line").attr("x1",0).attr("y1",0).attr("x2",function(t,e){return k(1.1*v)*l(_*e-u)}).attr("y2",function(t,e){return k(1.1*v)*i(_*e-u)}).attr("class","line").style("stroke","white").style("stroke-width","2px"),A.append("text").attr("class","legend").style("font-size","15px").style("stroke",function(t){if(o.indexOf(t)>=0|"数学"==t|"语文"==t|"英语"==t)return"red"}).attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(t,e){return k(v*p.labelFactor)*l(_*e-u)}).attr("y",function(t,e){return k(v*p.labelFactor)*i(_*e-u)}).text(function(t){return t}).call(d,p.wrapWidth);var T=c["x"]().curve(c["i"]).radius(function(t){return k(t[n])}).angle(function(t,e){return e*_});p.roundStrokes&&T.curve(c["h"]);var L=S.selectAll(".radarWrapper").data(e).enter().append("g").attr("class","radarWrapper");L.append("path").attr("class","radarArea").attr("d",function(t){return T(t.axes)}).style("stroke",function(t,e){return p.color[t.id]}).style("fill",function(t,e){p.color[t.id]}).style("fill-opacity",p.opacityArea).on("mouseover",function(t,e){w.selectAll(".radarArea").transition().duration(200).style("fill-opacity",.1),c["D"](this).transition().duration(200).style("fill-opacity",.7)}).on("mouseout",function(){w.selectAll(".radarArea").transition().duration(200).style("fill-opacity",p.opacityArea)}),L.append("path").attr("class","radarStroke").attr("d",function(t,e){return T(t.axes)}).style("stroke-width",p.strokeWidth+"px").style("stroke",function(t,e){return p.color[t.name]}).style("fill","none").style("filter","url(#glow)"),L.selectAll(".radarCircle").data(function(t){return t.axes}).enter().append("circle").attr("class","radarCircle").attr("r",p.dotRadius).attr("cx",function(t,e){return k(t.value)*l(_*e-u)}).attr("cy",function(t,e){return k(t.value)*i(_*e-u)}).style("fill",function(t,e){return p.color[t.id]}).style("fill-opacity",.8);var q=S.selectAll(".radarCircleWrapper").data(e).enter().append("g").attr("class","radarCircleWrapper");q.selectAll(".radarInvisibleCircle").data(function(t){return t.axes}).enter().append("circle").attr("class","radarInvisibleCircle").attr("r",1.5*p.dotRadius).attr("cx",function(t,e){return k(t.value)*l(_*e-u)}).attr("cy",function(t,e){return k(t.value)*i(_*e-u)}).style("fill","none").style("pointer-events","all").on("mouseover",function(t,e){j.attr("x",this.cx.baseVal.value-10).attr("y",this.cy.baseVal.value-10).transition().style("display","block").text(x(t.value)+p.unit)}).on("mouseout",function(){j.transition().style("display","none").text("")});var j=S.append("text").attr("class","tooltip").attr("x",0).attr("y",0).style("font-size","20px").style("display","none").attr("text-anchor","middle").attr("dy","0.35em");if(!1!==p.legend&&"object"===Object(N["a"])(p.legend)){var z=C.append("g"),B=e.map(function(t){return t.name});if(p.legend.title)z.append("text").attr("class","title").attr("transform","translate(".concat(p.legend.translateX,",").concat(p.legend.translateY,")")).attr("x",p.w-70).attr("y",10).attr("font-size","12px").attr("fill","#404040").text(p.legend.title);var $=z.append("g").attr("class","legend").attr("height",100).attr("width",200).attr("transform","translate(".concat(p.legend.translateX,",").concat(p.legend.translateY+20,")"));$.selectAll("rect").data(B).enter().append("rect").attr("x",p.w-65).attr("y",function(t,e){return 20*e}).attr("width",10).attr("height",10).style("fill",function(t,e){console.log(e),p.color[e]}),$.selectAll("text").data(B).enter().append("text").attr("x",p.w-52).attr("y",function(t,e){return 20*e+9}).attr("font-size","11px").attr("fill","#737373").text(function(t){return t})}return C}}},z=j,B=(a("f98e"),Object(p["a"])(z,L,q,!1,null,null,null)),$=B.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ele",staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12)"}},[a("el-row",[a("el-col",{attrs:{span:16}},[a("div",{staticStyle:{height:"250px"},attrs:{id:"calendar"}})]),a("el-col",{staticStyle:{height:"250px"},attrs:{span:8,id:"daycos"}},[a("div",[a("div",[a("h3",[t._v("日消费习惯")])]),a("div",{staticStyle:{display:"flex","justify-content":"center",width:"100%"}},[a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#fee090"}},[a("a",[t._v("2.5")])]),a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#fdae61"}},[a("a",[t._v("5")])]),a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#f46d43"}},[a("a",[t._v("7.5")])]),a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#d73027"}},[a("a",[t._v("10")])])]),a("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"weekcos"}}),a("div",{attrs:{id:"day"}},[a("svg",{staticClass:"axis"})])])])],1)],1)},O=[],M=a("d5ab");a("d5ab");r["a"].prototype.axios=I.a;var F={name:"studentCos",props:["studentId"],mounted:function(){var t=this;I.a.get("http://cuteanian.top/eduvis/mock/studentcosarray.json").then(function(e){t.studentCosData=e.data,t.getdata()}),I.a.get("http://cuteanian.top/eduvis/mock/studentCos5.json").then(function(e){t.studentCosData=e.data[t.studentId].data.splice(72,288),t.drawAxisOneDay(),t.drawhor(t.studentCosData,t.studentId)})},methods:{getdata:function(){var t=this.studentCosData[this.studentId];this.draweEchart(t)},draweEchart:function(t){var e=document.getElementById("calendar"),a=C.a.init(e),r=0;t.forEach(function(t,e){0==t[1]&&(t[1]=void 0),t[1]=-t[1],t[1]>r&&(r=t[1])});var n={title:{top:30,left:"center",text:"2018.7 - 2019.1 消费记录"},tooltip:{formatter:function(t){return"时间: "+t.value[0]+"消费:"+t.value[1]}},visualMap:{min:0,max:100,orient:"horizontal",left:"center",top:65,calculable:!0,textStyle:{color:"#000"}},calendar:{top:120,left:30,right:30,cellSize:["auto",13],range:["2018-07-01","2019-3-1"],itemStyle:{normal:{borderWidth:.5}},yearLabel:{show:!1}},series:{type:"heatmap",coordinateSystem:"calendar",data:t}};n&&"object"===Object(N["a"])(n)&&a.setOption(n,!0)},drawAxisOneDay:function(){var t=new Date("06:00:00 7/1/2018"),e=new Date("23:59:59 7/1/2018"),a=parseInt((e-t)/36e5)+1;console.log(a);var r=["6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],n=216*parseInt(document.body.clientWidth/700),o=c["A"]().domain([6,24]).range([0,n]),s=c["d"]().scale(o).tickValues(r.map(function(t){return t})),i=c["D"]("#day").select(".axis").attr("width",n).attr("height",50);i.append("g").call(s),c["D"]("#day").select(".axis").selectAll("text").attr("y",25),i.selectAll("path").attr("transform","translate(0,15)"),i.selectAll("line").attr("transform","translate(0,15)")},drawhor:function(t,e){c["D"]("#app").append("div").attr("class","tooltip").style("opacity",0);var a,r=new Date("06:00:00 7/1/2018"),n=new Date("23:59:59 7/1/2018"),o=parseInt((n-r)/36e5);a=288*parseInt(document.body.clientWidth/700);var s=c["A"]().domain([0,o]).range([0,a]),i=M["horizonChart"]().height(50).step(parseInt(document.body.clientWidth/700)).extent([0,10]).axis(s).colors(["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"]);c["D"]("#weekcos").selectAll(".horizon"+e).data([t]).enter().append("div").attr("class","horizon"+e).attr("week",e).each(i)}}},Y=F,R=(a("c10f"),Object(p["a"])(Y,W,O,!1,null,null,null)),G=R.exports,P=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},V=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ele",staticStyle:{"box-shadow":"0 2px 4px rgba(0, 0, 0, .12)"}},[a("h5",{staticStyle:{"margin-right":"40%"}},[t._v("考勤记录")]),a("div",{attrs:{id:"skq"}},[a("div",{attrs:{id:"kqvis"}}),a("div",{attrs:{id:"legend"}})])])}],X=a("bd18"),K=X["a"],H=(a("2ad9"),Object(p["a"])(K,P,V,!1,null,null,null)),Z=H.exports,J=a("e5a2"),U=a.n(J);a("1fd5");r["a"].prototype.axios=I.a;var Q={name:"student",components:{studentGrade:T,studentGradeSum:$,studentCos:G,studentKq:Z},mounted:function(){c["E"](".toprightchoose").remove(),c["E"](".toprightcos").remove(),c["E"](".classname").remove();var t=this;I.a.get("http://cuteanian.top/eduvis/mock/studentInfo.json").then(function(e){t.studentInfo=e.data,t.studentId=t.$route.query.studentId;var a=t.studentInfo[t.studentId];t.studentName=a["bf_Name"],t.studentCla=a["cla_Name"],t.studentAd=a["bf_NativePlace"],t.studentSex=a["bf_sex"],t.studentroom=a["bf_qinshihao"],t.leaveSchool=a["bf_leaveSchool"],t.polic=a["bf_policy"],""==t.leaveSchool?t.leaveSchool="否":t.leaveSchool="是",""==t.studentroom&&(t.studentroom="非住校生")}),t.driver()},created:function(){var t=this;I.a.get("http://cuteanian.top/eduvis/mock/studentSummary.json").then(function(e){t.studentSummary=e.data[t.studentId],console.log(t.studentSummary)})},data:function(){return{studentId:this.$route.query.studentId,studentName:"",studentCla:"",stuidentAd:"",studentSex:"",studentroom:"",leaveSchool:"",polic:"",choose:"",studentInfo:{},studentSummary:{}}},computed:{grademean:function(){if(void 0==this.studentSummary)return"无信息";var t,e=this.studentSummary.meanRank;return console.log(e),e<0?t="无成绩信息":e<.15?t="前15%,等级A":e<.45?t="前45%,等级B":e<.95?t="前95%,等级D":e<1&&(t="前100%,等级E"),t},gradevar:function(){if(void 0==this.studentSummary)return"无信息";var t,e=this.studentSummary.varRank;function a(t){var e=t.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/);return t.toFixed(Math.max(0,(e[1]||"").length-e[2]))}var r=a(e);return console.log(r),t=e<0?"无成绩信息":r<.00014771933447626275?"较稳定":"浮动较大",t},kq:function(){if(void 0==this.studentSummary)return"无信息";var t,e=this.studentSummary.kq;return t=0==e?"优秀":e<5?"良好":e<10?"较差":"糟糕",t},cos:function(){var t=this.studentSummary.cos,e="";return e=t<13?"节俭":t<33?"普通":"较高",e}},methods:{driver:function(){var t=new U.a;t.defineSteps([{element:"#chart",popover:{className:"first-step-popover-class",title:"Title on Popover",description:"Body of the popover",position:"top"}}]),t.start()},transChoose:function(t){console.log(t),this.choose=t}}},tt=Q,et=(a("a619"),Object(p["a"])(tt,y,x,!1,null,null,null)),at=et.exports,rt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},nt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"dotpanel"}},[a("p",{staticStyle:{"font-size":"18px","writing-mode":"vertical-rl"},attrs:{id:"rankp"}},[t._v("考勤排行榜")]),a("div",{staticClass:"border_block",attrs:{id:"dotplot_rank"}}),a("div",{staticClass:"border_block",attrs:{id:"dotplot"}}),a("p",{staticStyle:{"font-size":"18px","writing-mode":"vertical-rl"},attrs:{id:"rankp"}},[t._v("考勤信息")])])}];a("7d2f");r["a"].prototype.axios=I.a,r["a"].use(n["a"]),r["a"].use(n["a"]);var ot=[{path:"/student",component:at}],st=new n["a"]({routes:ot}),it={name:"classKq",props:["classid"],mounted:function(){var t=this;I.a.get("http://cuteanian.top/eduvis/mock/studentkq_test.json").then(function(e){t.kqdata=e.data,t.draw()})},methods:{draw:function(){var t=this,e=this,a={top:20,right:10,bottom:20,left:30},r=.8*window.innerWidth-a.left-a.right,n=.7*(window.innerWidth/12-a.top-a.bottom),o=c["D"]("#stream").append("svg").attr("width",r+a.left+a.right).attr("height",n+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),s=(o.append("g"),o.append("g"),{1001:{info:"迟到_晚到",index:0},1002:{info:"校徽_早退",index:1},1003:{info:"操场考勤机",index:2},99001:{info:"迟到[移动考勤机]",index:3},99002:{info:"校服[移动考勤机]",index:4},99003:{info:"早退[移动考勤机]",index:5},99004:{info:"离校[移动考勤机]",index:6},99005:{info:"进校[移动考勤机]",index:7}}),i=new Date("9/1/2016"),l=new Date("2/1/2019"),u=parseInt((l-i)/864e5),d=["9/1/2016","1/1/2017","6/1/2017","9/1/2017","1/1/2018","6/1/2018","9/1/2018","1/1/2019"],p=c["K"]("%Y-%m-%d"),h=(c["A"]().domain([0,u]).range([0,r]),c["C"]().domain([0,r]).range([i,l]),c["C"]().domain([i,l]).range([0,r]),c["A"]().domain([-5,5]).range([n,0]),["#8dd3c7","#ffffb3","#bebada","#fbd462","#80b1d3","#fb8072","#b3de69","#fccde5"]),v=5,f=2*v*(u+1),b=2*v*20,m=c["D"]("#dotplot").append("svg").attr("id","dotplotSVG").attr("width",f+a.left+a.right).attr("height",b+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),g=m.append("g"),y=(c["A"]().domain([0,u]).range([0,f]),c["C"]().domain([0,f]).range([i,l])),x=c["C"]().domain([i,l]).range([0,f]),_="",k=c["D"]("body").append("div").attr("class","tooltip").style("height",200).style("opacity",0);function w(t){var e={day:t};return c["p"](s).forEach(function(t){e[t]=0}),e}function C(t){var e=[];return t.forEach(function(t){t.kqdata.forEach(function(a){a.stud_id=t.bf_studentID,a.stud_name=t.bf_Name,a.cla_id=t.bf_classid,a.cla_name=t.cla_Name,e.push(a)})}),e}function S(t){var r=g.append("rect").attr("id","dotplotBack").attr("x",0).attr("y",0).attr("width",f).attr("height",b+a.top+a.bottom).attr("fill","white");m.append("g").call(c["d"](x).tickFormat(p).tickValues(d.map(function(t){return new Date(t)})));var n=t.filter(function(t){return t.day>=0}).sort(function(t,e){return t.day==e.day?t.ControllerID==e.ControllerID?parseInt(t.cla_id)-parseInt(e.cla_id):t.ControllerID-e.ControllerID:t.day-e.day}),o=0,l=0;n.forEach(function(t){t.day>o&&(l=0,o=t.day),t.y=l,l+=1});var u=c["q"]().x(function(t){return t[0]}).y(function(t){return t[1]}),w=m.append("path").attr("d",u([[0,0],[0,b]])).attr("stroke","black").attr("stroke-width",1).attr("opacity",0),C=m.append("text").attr("font-size","12px").attr("text-anchor","left").attr("x","0.5em").attr("y",0).attr("dx",0).attr("dy","0.5em"),S=function(t){console.log(t),m.selectAll(".dot").attr("opacity",""==_?.6:.1),""!=_&&m.selectAll(".dot-".concat(_)).attr("opacity",1),m.selectAll(".dot-".concat(t.stud_id)).attr("opacity",1),k.transition().duration(200).style("opacity",.9).attr("height",200);var e=s[t.ControllerID].info,a="姓名: ".concat(t.stud_name,"<br/>班级: ").concat(t.cla_name,"<br/>时间: ").concat(t.DataDateTime,"<br/>类型: ").concat(e);k.html(a).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px")},D=function(){m.selectAll(".dot").attr("opacity",""==_?.6:.1),m.selectAll(".dot-".concat(_)).attr("opacity",1),k.transition().duration(500).style("opacity",0)},E=function(t){st.push({path:"/student",query:{studentId:t.stud_id}}),st.go()},A=function(t){_=t.stud_id,m.selectAll(".dot").attr("opacity",.1),m.selectAll(".dot-".concat(t.stud_id)).attr("opacity",1),c["E"](".bar").attr("opacity",.5),c["E"](".bar-".concat(t.stud_id)).attr("opacity",1),e.$emit("chooseStudent",_)},T=function(){_="",m.selectAll(".dot").attr("opacity",.6),c["E"](".bar").attr("opacity",1)};m.selectAll(".dott").data(n).enter().append("circle").attr("class",function(t){return"dott dott-".concat(t.stud_id)}).attr("cx",function(t){return t.day*v*2+v}).attr("cy",function(t){return t.y*v*2+v}).attr("r",v).attr("fill",function(t){return h[s[t.ControllerID].index]}).attr("opacity",.6).on("mouseover",S).on("mouseout",D).on("click",A).on("dblclick",E);var L=function(){var t=c["v"](c["D"]("#dotplotBack").node());w.attr("opacity",1).attr("d",u([[t[0],0],[t[0],b]])),C.attr("opacity",1).attr("x",t[0]).text(p(y(t[0])))},q=function(){w.transition().duration(500).attr("opacity",0),C.transition().duration(500).attr("opacity",0)};function N(){var t=c["k"].selection;if(c["D"]("#dotplot_rank").select("svg").remove(),t){var e=[parseInt((y(t[0])-i)/864e5),parseInt((y(t[1])-i)/864e5)];I(n.filter(function(t){return t.day>=e[0]&&t.day<=e[1]}))}else I(n)}r.on("click",T).on("mousemove",L).on("mouseout",q),g.call(c["g"]().extent([[0,0],[f,b]]).on("end",N))}function I(t){for(var a=20,r=2,n=c["w"]().key(function(t){return t.stud_id}).rollup(function(t){return t}).entries(t).sort(function(t,e){return e.value.length-t.value.length}),o=(a+r)*n.length,i=c["D"]("#dotplot_rank").append("svg").attr("width",100).attr("height",o).append("g"),l=i.append("rect").attr("x",0).attr("y",0).attr("width",100).attr("height",o).attr("fill","white"),u=c["r"](),d=function(t){var e={stud_id:n[t].key,count:n[t].value.length,idx:t,stud_name:n[t].value[0].stud_name,cla_id:n[t].value[0].cla_id,cla_name:n[t].value[0].cla_name};c["p"](s).forEach(function(t){e[t]=0}),u.set(n[t].key,e)},p=0;p<n.length;p++)d(p);t.forEach(function(t){u.get(t.stud_id)[t.ControllerID]+=1});var v=u.values().sort(function(t,e){return e.count-t.count}),f=c["F"]().keys(c["p"](s)).order(c["I"]).offset(c["G"]),b=f(v),g=[],y=[];u.keys().forEach(function(t){g.push(t),y.push(u.get(t).idx*(a+r))});var x=c["B"]().domain(g).range(y),w=c["A"]().domain([0,c["s"](v,function(t){return t.count})]).range([0,100]),C=i.selectAll(".bargroup").data(b).enter().append("g").attr("class","bargroup").attr("fill",function(t){return h[s[t.key].index]}),S=function(t){k.transition().duration(200).style("opacity",.9);var e="姓名: ".concat(t.data.stud_name,"<br/>班级: ").concat(t.data.cla_name,"<br/>总数: ").concat(t.data.count);k.html(e).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px")},I=function(t){k.transition().duration(500).style("opacity",0)},D=function(t){_=t.data.stud_id,m.selectAll(".dot").attr("opacity",.1),m.selectAll(".dot-".concat(_)).attr("opacity",1),i.selectAll(".bar").attr("opacity",.5),i.selectAll(".bar-".concat(t.data.stud_id)).attr("opacity",1),e.$emit("chooseStudent",_)},E=function(){_="",m.selectAll(".dot").attr("opacity",.6),i.selectAll(".bar").attr("opacity",1)},A=function(t){console.log(t),st.push({path:"/student",query:{studentId:t.data.stud_id}}),st.go()};C.selectAll("rect").data(function(t){return t}).enter().append("rect").attr("class",function(t){return"bar bar-".concat(t.data.stud_id)}).attr("x",function(t){return w(t[0])}).attr("y",function(t){return x(t.data.stud_id)}).attr("height",a).attr("width",function(t){return w(t[1])-w(t[0])}).on("mouseover",S).on("mouseout",I).on("click",D).on("dblclick",A),l.on("click",E)}function D(){for(var t=[],e=0;e<u;e++)t.push(w(e));return t}var E=D();this.kqdata.forEach(function(t){t.kqdata.forEach(function(t){var e=t.DataDateTime.split(" ")[0].split("/"),a=new Date(e[0],e[1]-1,e[2]),r=parseInt((a-i)/864e5);t.day=r,r>0&&(E[r][t.ControllerID]+=1)})});var A=C(this.kqdata),T=A.filter(function(e){return e.cla_id==t.classid});S(T),I(T,10)}}},lt=it,ct=(a("a4db"),Object(p["a"])(lt,rt,nt,!1,null,null,null)),ut=ct.exports;r["a"].prototype.axios=I.a,r["a"].use(n["a"]);var dt=[{path:"/student",component:at}],pt=new n["a"]({routes:dt}),ht={name:"class",props:["id"],components:{classkq:ut},data:function(){return{className:"",loading:!0,studentId:"",dormId:"",dormaryid:"",studentid:"",students:[],select_type:!0}},methods:{help:function(){var t=new U.a;t.defineSteps([{element:"#dotpanel",popover:{title:"考勤信息",description:this.className+"所有同学在校期间的考勤信息",position:"bottom"}},{element:"#dotplot_rank",popover:{title:"考勤排行榜",description:"<strong>交互</strong></br>单击某个同学可在成绩信息中选中该同学，双击可进入该同学主页",position:"bottom"}},{element:"#dotplot",popover:{title:"考勤信息",description:"<strong>图表描述</strong></br>x轴代表时间,每一个圆圈代表一个同学的一次考勤记录。</br><strong>交互</strong></br>框选某段时间可更新考勤排行榜</br>单击某个圆圈可在成绩信息中选中该同学，双击可进入该同学主页",position:"bottom"}},{element:".class",popover:{title:"选择寝室",description:"查看同寝室同学的成绩情况",position:"top"}},{element:".type",popover:{title:"选择学生",description:"查看指定学生的成绩情况",position:"top"}},{element:".el-switch",popover:{title:"开启或关闭文理科成绩视图",position:"top"}},{element:"#students",popover:{title:"文理科成绩视图（可拖动）",description:"<strong>图标描述</strong>每一个圆圈代表一个同学，x轴文科，y轴理科。等第值越低代表该同学成绩越好</br>y=x直线上方表示理科较好，下方表示文科较好</br><strong>交互</strong></br>单击某个圆圈可在成绩信息中选中该同学，双击可进入该同学主页",position:"top",opacity:.75}},{element:"#vis",popover:{title:this.className+"成绩视图",description:"<strong>图表描述</strong></br>每一个dotplot图代表该班级某次考试某个科目考试情况</br>每一个圆圈代表一个同学，左侧男生，右侧女生<br>每一个同学用直线连接起来，展示了成绩上升和下降情况</br><strong>交互</strong></br>单击某个同学可高亮该同学，双击可进入个人主页",position:"top",opacity:.75}}]),t.start()},changeLinkType:function(t){1==t?this.drawStudents(this.students):(c["D"]("#students").select("svg").remove(),document.getElementById("students").style.height=0,document.getElementById("students").style.width=0)},drawStudents:function(t){var e={top:20,right:20,bottom:30,left:40},a=300-e.left-e.right,r=300-e.top-e.bottom,n=c["A"]().range([0,a]),o=c["A"]().range([r,0]),s=["#6ca0dc","#f8b9d4"],i=c["b"](n),l=c["c"](o),u=c["D"]("#students").append("svg").attr("width",a+e.left+e.right).attr("height",r+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");u.append("rect").attr("width",250).attr("height",250).attr("fill","#eee"),u.append("path").attr("d","M0 250 L250 0").attr("stroke","black").attr("stroke-width",1),n.domain([1,0]),o.domain([1,0]);var d=function(t){f.transition().duration(200).style("opacity",.9);var e=t.bf_Name;""!=t.bf_qinshihao&&"undefined"!=typeof t.bf_qinshihao&&(e+="<br/>"+"寝室号: ".concat(t.bf_qinshihao)),f.html(e).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px"),c["E"](".dot-"+t.bf_StudentID.toString()).attr("fill","yellow")},p=function(t){f.transition().duration(500).style("opacity",0),c["E"](".dot-"+t.bf_StudentID.toString()).attr("fill",function(t){return"男"==t.bf_sex?s[0]:s[1]})},h=function(t){pt.push({path:"/student",query:{studentId:t.bf_StudentID}}),pt.go()};u.append("g").attr("class","x axis").attr("transform","translate(0,"+r+")").call(i).append("text").attr("class","label").attr("x",a).attr("y",-6).style("text-anchor","end").text("Sepal Width (cm)"),u.append("g").attr("class","y axis").call(l).append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Sepal Length (cm)");var v=this;u.append("text").text("理科等第").attr("x",0).attr("y",0).style("font-size","12px"),u.append("text").text("文科等第").attr("x",a-40).attr("y",r).style("font-size","12px"),u.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").attr("studentid",function(t){return t.bf_StudentID}).attr("class",function(t){return"dot dot-".concat(t.bf_StudentID.toString()," dot-room-").concat(t.bf_qinshihao)}).attr("r",4).attr("cx",function(t){return n(t.wen)}).attr("cy",function(t){return o(t.li)}).style("fill",function(t){return"男"==t.bf_sex?s[0]:s[1]}).attr("stroke",function(t){return 0==t.bf_zhusu?"None":"black"}).on("click",function(t,e){v.selectStudent(t.bf_StudentID)}).on("mouseover",d).on("mouseout",p).on("dblclick",h);var f=c["D"]("body").append("div").attr("class","tooltip").style("opacity",0)},drawnew:function(t){var e,a,r=15,n=10,o=11,s=4,i=2,l=2*s*20,u=2*s*4,d=30,p=5,h=20,v=r*(l+h)+d-h+100,f=(n*u+p)*o+d-p,b=c["D"]("#vis").append("svg").attr("width",v).attr("height",f),m=b.append("g"),y=b.append("g").attr("id","person"),x=b.append("g"),_={"1.0":{name:"语文",score:150},"2.0":{name:"数学",value:150},"3.0":{name:"英语",score:150},"4.0":{name:"物理",value:100},"5.0":{name:"化学",score:100},"6.0":{name:"生物",value:100},"7.0":{name:"历史",score:100},"8.0":{name:"地理",value:100},"9.0":{name:"体育",score:100},"11.0":{name:"音乐",value:100},"12.0":{name:"美术",value:100},"0.0":{name:"总分",value:800},"17.0":{name:"政治",score:100},"59.0":{name:"技术",value:100}},k={"0.0":0,"1.0":1,"2.0":2,"3.0":3,"4.0":4,"5.0":5,"6.0":6,"7.0":7,"8.0":8,"17.0":9,"59.0":10,"9.0":11,"11.0":12,"12.0":13},w=["0.0","1.0","2.0","3.0","4.0","5.0","6.0","7.0","8.0","17.0","59.0"],C=["#6ca0dc","#f8b9d4"],S=c["D"]("body").append("div").attr("class","tooltip").style("opacity",0),I=c["A"]().range([0,1]).domain([-n*u,n*u]),D=c["o"];function E(t){var e=b.append("g");e.selectAll(".examTitle").data(t).enter().append("text").attr("fill","black").attr("font-size","14px").attr("text-anchor","middle").attr("x",function(t,e){return(l+h)*e+d}).attr("y",0).attr("dx",l/2).attr("dy","1.5em").text(function(t){return t}).call(A),document.getElementById("vis").addEventListener("scroll",function(t){c["E"]("tspan").attr("y",this.scrollTop)},!1)}function A(t){t.each(function(){var t=c["D"](this),e=t.text(),a=1.1,r=t.attr("x"),n=t.attr("y");t.text(null),t.append("tspan").attr("x",r).attr("y",n).attr("text-anchor","middle").attr("dy",a+"em").text(e.slice(0,10)),t.append("tspan").attr("x",r).attr("y",n).attr("text-anchor","middle").attr("dy",2*a+"em").attr("dx",40).text(e.slice(10,e.length))})}function T(t){var e=b.append("g"),a=e.selectAll("subTitle").data(t).enter().append("text").attr("fill","black").attr("font-size","14px").attr("text-anchor","middle").attr("x",0).attr("y",function(t,e){return(e+.5)*(u*n+p)}).attr("dx","1em").attr("dy","1em").text(function(t){return t});document.getElementById("vis").addEventListener("scroll",function(t){a.attr("x",this.scrollLeft)},!1)}function L(t,e){m.append("g").attr("transform","translate(".concat(t.x,",").concat(t.y,")"));var a=x.append("g").attr("transform","translate(".concat(t.x,",").concat(t.y,")")),r=c["q"]().x(function(t){return t[0]}).y(function(t){return t[1]}),o=c["l"](e,function(t){return t.mes_Score}),d=function(e){S.transition().duration(200).style("opacity",.9);var a=e.bf_Name+"<br/>"+"".concat(_[t.sub_id].name,"成绩: ").concat(e.mes_Score.toString());""!=e.bf_qinshihao&&"undefined"!=typeof e.bf_qinshihao&&(a+="<br/>"+"寝室号: ".concat(e.bf_qinshihao)),S.html(a).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px"),c["E"](".dot-"+e.mes_StudentID.toString()).attr("fill","yellow")},p=function(t){S.transition().duration(500).style("opacity",0),c["E"](".dot-"+t.mes_StudentID.toString()).attr("fill",function(t){return"男"==t.bf_sex?C[0]:C[1]})},h=function(t){pt.push({path:"/student",query:{studentId:t.mes_StudentID}}),pt.go()},v=function(t){c["E"](".personLine").attr("opacity",0),c["E"](".personLine-".concat(t.mes_StudentID)).attr("opacity",1)},f=function(){c["E"](".personLine").attr("opacity",.5)},b=-1,g=-1,y=5e3,k=-1,w="0.0"==t.sub_id?6:0;e.forEach(function(e){e.sub_id=t.sub_id,e.mes_Score<y-w&&(b=0,g=0,y=e.mes_Score,k+=1),"男"==e.bf_sex?(e.xIdx=-b,e.yIdx=k,e.cx=s*(2*e.xIdx-1)-i,b+=1):(e.xIdx=g,e.yIdx=k,e.cx=s*(2*e.xIdx+1)+i,g+=1),e.cy=s*(2*e.yIdx+1),e.x=t.x+l/2,e.y=t.y+e.cy+u}),a.append("rect").attr("stroke","None").attr("fill","white").attr("opacity",0).attr("width",l).attr("height",u*n).on("click",f),a.selectAll(".dot").data(e).enter().append("circle").attr("class",function(t){return"dot dot-".concat(t.mes_StudentID.toString()," dot-room-").concat(t.bf_qinshihao)}).attr("transform","translate(".concat(l/2,",").concat(u,")")).attr("cx",function(t){return t.cx}).attr("cy",function(t){return t.cy}).attr("r",s).attr("fill",function(t){return"男"==t.bf_sex?C[0]:C[1]}).attr("stroke",function(t){return""==t.bf_qinshihao||"undefined"==typeof t.bf_qinshihao?"None":"black"}).on("mouseover",d).on("mouseout",p).on("click",v).on("dblclick",h),a.append("path").attr("transform",function(t,e){return"translate(".concat(l/2,",").concat(u,")")}).attr("d",r([[0,0],[0,2*s*(k+1)]])).attr("stroke","black").attr("stroke-width",2),a.append("text").attr("x",l/2).attr("text-anchor","middle").attr("font-size","12px").attr("y",u+2*s*(k+1)).attr("dy","1em").text(o[0]),a.append("text").attr("x",l/2).attr("text-anchor","middle").attr("font-size","12px").attr("y",u/2).attr("dy","0.5em").text(o[1])}function q(t){var e=c["w"]().key(function(t){return t.sub_id}).entries(t),a=c["q"]().x(function(t){return t[0]}).y(function(t){return t[1]});e.forEach(function(t){var e=t.key,r=c["w"]().key(function(t){return t.mes_StudentID}).entries(t.values);r.forEach(function(t){if(void 0!=t.key)for(var r=function(r){var n=[t.values[r].x,t.values[r].y],o=[t.values[r+1].x,t.values[r+1].y];y.append("path").datum([n,o]).attr("class",function(a){return"personLine personLine-".concat(t.key," personLine-").concat(parseInt(e),"-").concat(t.key," personLine-room-").concat(t.values[r].bf_qinshihao)}).attr("d",a).attr("fill","None").attr("stroke",function(t){return D(I(t[1][1]-t[0][1]))}).attr("opacity",.5).attr("stroke-width",2*s)},n=0;n<t.values.length-1;n++)r(n)})})}function N(t){m.selectAll(".teaBar").data(t).enter().append("rect").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}).attr("stroke","black").attr("fill","None"),m.selectAll(".teaLabel").data(t).enter().append("text").attr("x",function(t){return t.x+t.width/2}).attr("y",function(t){return t.y}).attr("fill","black").attr("text-anchor","middle").attr("font-size","14px").attr("dy","1em").text(function(t){return"".concat(t.teacher_name," (").concat(parseInt(t.teacher_id),")")})}function j(t){var e=[];return t.forEach(function(t,a){var r=d+a*(l+h);t.subScore.forEach(function(t){e.push({attrs:{x:r,y:k[t.sub_id]*(u*n+p)+d,sub_id:t.sub_id},data:t.subScore.sort(function(t,e){return e.mes_Score-t.mes_Score})})})}),e}function z(t){var e=[];t.forEach(function(t,a){t.subScore.filter(function(t){return"0.0"!==t.sub_id}).forEach(function(r){var n={exam_id:t.exam_number,exam_idx:a,sub_id:r.sub_id,sub_name:r.sub_name,teacher_id:r.bas_id,teacher_name:r.bas_Name};e.push(n)})});var a=c["w"]().key(function(t){return t.sub_id}).sortValues(function(t,e){return parseInt(t.exam_id)-parseInt(e.exam_id)}).entries(e),r=[];return a.forEach(function(t){var e=t.values[0].exam_idx,a=t.values[0].teacher_id;t.values.forEach(function(o,s){if(""===a&&""!==o.teacher_id&&(e=o.exam_idx,a=o.teacher_id),""!==a&&o.teacher_id!==a&&e<o.exam_idx){var i={start:e,end:o.exam_idx,teacher_id:a,teacher_name:t.values[s-1].teacher_name,sub_id:o.sub_id,sub_name:o.sub_name};i.x=d+i.start*(l+h)+15,i.y=k[i.sub_id]*(u*n+p)+d-10,i.width=d+(i.end-i.start)*(l+h)-50,i.height=20,r.push(i),e=o.exam_idx,a=o.teacher_id}})}),r}function B(t){var e=new Set;t.forEach(function(t){return t.data.forEach(function(t){return e.add(t.mes_StudentID)})}),a=Array.from(e).sort(),c["D"]("#stud").selectAll("option").data(Array.from(e).sort()).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}),g()("#stud").change(function(){var t=g()(this).find("option:selected").attr("value");y.selectAll(".personLine").attr("opacity",0),y.selectAll(".personLine-"+t).attr("opacity",1)})}function $(t){var a=new Set;t.forEach(function(t){return t.data.forEach(function(t){""!=t.bf_qinshihao&&"undefined"!=typeof t.bf_qinshihao&&a.add(t.bf_qinshihao)})}),e=Array.from(a).sort(),c["D"]("#room").selectAll("option").data(Array.from(a).sort()).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}),g()("#room").change(function(){var t=g()(this).find("option:selected").attr("value");y.selectAll(".personLine").attr("opacity",0),y.selectAll(".personLine-room-"+t).attr("opacity",1)})}var W=t.map(function(t){return t.exam_numname});E(W);var O=w.map(function(t){return _[t].name});T(O);var M=j(t),F=z(t);N(F),$(M),B(M),this.dormId=e,this.studentId=a,M.forEach(function(t){return L(t.attrs,t.data)}),q(c["E"](".dot").data())},selectStudent:function(t){var e=c["D"]("#vis").select("#person");e.selectAll(".personLine").attr("opacity",0),e.selectAll(".personLine-"+t).attr("opacity",1)},selectDorm:function(t){var e=c["D"]("#vis").select("#person");e.selectAll(".personLine").attr("opacity",0),e.selectAll(".personLine-room-"+t).attr("opacity",1)}},mounted:function(){var t=this;c["E"](".toprightchoose").remove(),c["E"](".toprightcos").remove();var e=this;I.a.get("http://cuteanian.top/eduvis/mock/allClass_521.json").then(function(t){e.allClass=t.data;var a=e.$route.query.id;e.allClass.forEach(function(t,r){t["cla_id"]==a&&(e.className=t["cla_Name"],e.drawnew(t.classScore))}),e.loading=!1}),I.a.get("http://cuteanian.top/eduvis/mock/allClassStudent.json").then(function(t){var a=parseInt(e.$route.query.id);e.students=t.data[a],e.drawStudents(e.students)});var a=document.getElementById("helpbutton");a.addEventListener("click",function(e){e.target;event.stopPropagation(),t.help()})}},vt=ht,ft=(a("60b6"),Object(p["a"])(vt,f,b,!1,null,null,null)),bt=ft.exports;r["a"].use(n["a"]);var mt=[{path:"/Class",component:bt}],gt=new n["a"]({routes:mt}),yt={name:"app",components:{multiLine:v},computed:{},data:function(){return{loadData:[],navList:[{name:"/Choose",navItem:"选课",class:"a3"},{name:"/Cos",navItem:"消费",class:"a4"}],d3Color:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],second:[{name:"/Home",navItem:"成绩/考勤",class:"a2",second:[{name:"/Home",navItem:"年级总成绩"}]}],activeIndex:"",studentid:"",options:[{value:"0",label:"原始分"},{value:"1",label:"Z值"},{value:"2",label:"T值"},{value:"3",label:"等地"}],classes:[{value:"924",label:"高三(06)"},{value:"916",label:"高三(02)"},{value:"921",label:"高三(01)"},{value:"922",label:"高三(05)"},{value:"919",label:"高三(07)"},{value:"918",label:"高三(04)"},{value:"925",label:"高三(10)"},{value:"917",label:"高三(03)"},{value:"923",label:"高三(09)"},{value:"920",label:"高三(08)"}]}},mounted:function(){},methods:{open:function(){var t=this;this.$prompt("请输入需要查询的班级id","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{3}$/,inputErrorMessage:"ID格式不正确"}).then(function(e){var a=e.value;t.$message({type:"success",message:"班级ID: "+a}),gt.push({path:"/class",query:{id:a}}),gt.go()}).catch(function(){t.$message({type:"info",message:"取消输入"})})},searchStudent:function(){gt.push({path:"/student",query:{studentId:this.studentid}}),gt.go()},routechange:function(){console.log("click"),gt.push({path:"/menu"}),gt.go()}}},xt=yt,_t=(a("034f"),Object(p["a"])(xt,o,s,!1,null,null,null)),kt=_t.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"help"},[a("el-button",{attrs:{round:"",id:"helpbutton"}},[t._v("引导")])],1),a("div",{attrs:{id:"allkq"}},[a("allKq",{on:{clickClass:t.selectClass}})],1),a("div",{staticClass:"select"},[a("p",{staticStyle:{"font-size":"30px","margin-right":"40px"}},[t._v("成绩")]),t._m(0),t._m(1),a("div",{staticClass:"class"},[a("el-select",{attrs:{placeholder:"请选择班级"},on:{change:t.selectClass},model:{value:t.classid,callback:function(e){t.classid=e},expression:"classid"}},t._l(t.classes,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.value))])])}),1)],1),a("div",{staticClass:"type"},[a("el-select",{attrs:{placeholder:"请选择指标"},on:{change:t.selectType},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.label))])])}),1)],1),a("div",{staticClass:"select-type"},[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"同一班级","inactive-text":"同一老师"},on:{change:t.changeLinkType},model:{value:t.select_type,callback:function(e){t.select_type=e},expression:"select_type"}})],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"vis","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}})])},Ct=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"colormap",staticStyle:{"margin-right":"40px"}},[r("p",[t._v("排名变化")]),r("img",{staticStyle:{height:"10px",width:"120px",opacity:"0.6"},attrs:{src:a("1be3")}}),r("p",[t._v("下降 <------\x3e 上升")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"procolormap",staticStyle:{"margin-right":"40px"}},[a("p",[t._v("概率分布")]),a("div",{staticStyle:{display:"flex"}},[a("div",{staticClass:"rect",staticStyle:{"background-color":"#ccc"}}),a("div",{staticClass:"rect",staticStyle:{"background-color":"#aaa"}}),a("div",{staticClass:"rect",staticStyle:{"background-color":"#666"}}),a("div",{staticClass:"rect",staticStyle:{"background-color":"#333"}})]),a("p",[t._v("0 0.25 0.5 0.75 1.0")])])}],St=(a("6f349"),a("4964")),It=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Dt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"allKq"}},[a("p",{staticStyle:{"font-size":"18px","writing-mode":"vertical-rl"},attrs:{id:"rankp"}},[t._v("考勤排行榜")]),a("div",{staticClass:"border_block",attrs:{id:"stream_rank"}}),a("div",{staticClass:"border_block",attrs:{id:"stream"}}),a("p",{staticStyle:{"font-size":"18px","writing-mode":"vertical-rl"},attrs:{id:"rankp"}},[t._v("考勤信息")])])}];a("b315"),a("cfe1");r["a"].prototype.axios=I.a,r["a"].use(n["a"]);var Et=[{path:"/Class",component:bt}],At=new n["a"]({routes:Et}),Tt={name:"allKq",props:["thisid"],mounted:function(){var t=this;I.a.get("http://cuteanian.top/eduvis/mock/studentkq_test.json").then(function(e){t.kqdata=e.data,t.draw()})},methods:{draw:function(){var t=this,e={top:5,right:10,bottom:20,left:50},a=2*(window.innerWidth-e.left-e.right),r=.7*(window.innerWidth/9-e.top-e.bottom),n=c["D"]("#stream").append("svg").attr("width",a+e.left+e.right).attr("height",r+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")"),o=n.append("g"),s=n.append("g"),i={1001:{info:"迟到_晚到",index:0},1002:{info:"校徽_早退",index:1},1003:{info:"操场考勤机",index:2},99001:{info:"迟到[移动考勤机]",index:3},99002:{info:"校服[移动考勤机]",index:4},99003:{info:"早退[移动考勤机]",index:5},99004:{info:"离校[移动考勤机]",index:6},99005:{info:"进校[移动考勤机]",index:7}},l=new Date("9/1/2016"),u=new Date("2/1/2019"),d=parseInt((u-l)/864e5),p=["9/1/2016","1/1/2017","6/1/2017","9/1/2017","1/1/2018","6/1/2018","9/1/2018","1/1/2019"],h=c["K"]("%Y-%m-%d"),v=c["A"]().domain([0,d]).range([0,a]),f=c["C"]().domain([0,a]).range([l,u]),b=c["C"]().domain([l,u]).range([0,a]),m=c["A"]().domain([-3,3]).range([r,0]),g=["#8dd3c7","#ffffb3","#bebada","#fbd462","#80b1d3","#fb8072","#b3de69","#fccde5"],y=3,x=2*y*(d+1),_=2*y*20,k=c["D"]("#dotplot").append("svg").attr("id","dotplotSVG").attr("width",x+e.left+e.right).attr("height",_+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")"),w=(k.append("g"),c["A"]().domain([0,d]).range([0,x]),c["C"]().domain([0,x]).range([l,u]),c["C"]().domain([l,u]).range([0,x]),c["D"]("body").append("div").attr("class","tooltip").style("opacity",0));function C(t){var e={day:t};return c["p"](i).forEach(function(t){e[t]=0}),e}function S(){for(var t=[],e=0;e<d;e++)t.push(C(e));return t}function I(t,u){E(u);var d=n.append("g").attr("transform","translate(0,"+r/2+")").call(c["b"](b).tickFormat(h).tickValues(p.map(function(t){return new Date(t)})));d.selectAll("text").style("font-size","14px").attr("transform","translate(40,0)");var y=c["c"](m).ticks(6),x=n.append("g").call(y);x.selectAll("text").text(function(t,e){return 0==t?0:"10^"+Math.abs(t)}),document.getElementById("stream").addEventListener("scroll",function(t){console.log(this.scrollLeft),x.selectAll("line").attr("x",this.scrollLeft-10),x.selectAll("text").attr("x",this.scrollLeft-10)},!1);var _=c["F"]().offset(c["H"]).keys(c["p"](i))(t),k=c["q"]().x(function(t){return t[0]}).y(function(t){return t[1]}),w=s.append("path").attr("d",k([[0,0],[0,r]])).attr("stroke","black").attr("stroke-width",1),C=s.append("text").attr("font-size","12px").attr("text-anchor","left").attr("x","0.5em").attr("y",0).attr("dx",0).attr("dy","0.5em"),S=function(){var t=c["v"](c["D"]("#streamBack").node());w.attr("opacity",1).attr("d",k([[t[0],0],[t[0],r]])),C.attr("opacity",1).attr("x",t[0]).text(h(f(t[0])))},I=function(){w.transition().duration(500).attr("opacity",0),C.transition().duration(500).attr("opacity",0)};function D(){var t=c["k"].selection;if(c["D"]("#stream_rank").select("svg").remove(),t){var e=[parseInt((f(t[0])-l)/864e5),parseInt((f(t[1])-l)/864e5)];E(u.filter(function(t){return t.day>=e[0]&&t.day<=e[1]}))}else E(u)}s.append("rect").attr("id","streamBack").attr("x",0).attr("y",0).attr("width",a).attr("height",r+e.top+e.bottom).attr("fill","white").attr("opacity",0).on("mousemove",S).on("mouseout",I),o.selectAll("mylayers").data(_).enter().append("path").style("fill",function(t){return g[i[t.key].index]}).attr("d",c["a"]().curve(c["j"]).x(function(t){return v(t.data.day)}).y0(function(t){return 0==t[0]?m(0):m(Math.sign(t[0])*Math.log10(Math.abs(t[0])+1))}).y1(function(t){return 0==t[1]?m(0):m(Math.sign(t[1])*Math.log10(Math.abs(t[1])+1))})),s.call(c["g"]().extent([[0,0],[a,r]]).on("end",D))}function D(t){var e=[];return t.forEach(function(t){t.kqdata.forEach(function(a){a.stud_id=t.bf_studentID,a.stud_name=t.bf_Name,a.cla_id=t.bf_classid,a.cla_name=t.cla_Name,e.push(a)})}),e}function E(e){for(var a=c["w"]().key(function(t){return t.cla_id}).rollup(function(t){return t}).entries(e).sort(function(t,e){return e.value.length-t.value.length}),r=20,n=2,o=(r+n)*a.length,s=c["D"]("#stream_rank").append("svg").attr("width",100).attr("height",o).append("g"),l=s.append("rect").attr("x",0).attr("y",0).attr("width",100).attr("height",o).attr("fill","white"),u=c["r"](),d=function(t){var e={count:a[t].value.length,idx:t,cla_id:a[t].value[0].cla_id,cla_name:a[t].value[0].cla_name};c["p"](i).forEach(function(t){e[t]=0}),u.set(a[t].key,e)},p=0;p<a.length;p++)d(p);e.forEach(function(t){u.get(t.cla_id)[t.ControllerID]+=1});var h=u.values().sort(function(t,e){return e.count-t.count}),v=c["F"]().keys(c["p"](i)).order(c["I"]).offset(c["G"]),f=v(h),b=[],m=[];u.keys().forEach(function(t){b.push(t),m.push(u.get(t).idx*(r+n))});var y=c["A"]().domain([0,c["s"](h,function(t){return t.count})]).range([0,100]),x=c["B"]().domain(b).range(m),_=s.selectAll(".bargroup").data(f).enter().append("g").attr("class","bargroup").attr("fill",function(t){return g[i[t.key].index]}),C=function(t){w.transition().duration(200).style("opacity",.9);var e="班级: ".concat(t.data.cla_name,"<br/>总数: ").concat(t.data.count);w.html(e).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px")},S=function(){w.transition().duration(500).style("opacity",0)},I=function(){"",k.selectAll(".dot").attr("opacity",.6),s.selectAll(".bar").attr("opacity",1)},D=function(e){t.$emit("clickClass",e.data.cla_id)},E=function(t){console.log(t),At.push({path:"/class",query:{id:t.data.cla_id}}),At.go()};_.selectAll("rect").data(function(t){return t}).enter().append("rect").attr("class",function(t){return"bar bar-".concat(t.data.cla_id)}).attr("x",function(t){return y(t[0])}).attr("y",function(t){return x(t.data.cla_id)}).attr("height",r).attr("width",function(t){return y(t[1])-y(t[0])}).on("mouseover",C).on("mouseout",S).on("click",D).on("dblclick",E),l.on("click",I)}var A=S();this.kqdata.forEach(function(t){t.kqdata.forEach(function(t){var e=t.DataDateTime.split(" ")[0].split("/"),a=new Date(e[0],e[1]-1,e[2]),r=parseInt((a-l)/864e5);t.day=r,r>0&&(A[r][t.ControllerID]+=1)})});var T=D(this.kqdata);I(A,T,10)}}},Lt=Tt,qt=(a("a427"),Object(p["a"])(Lt,It,Dt,!1,null,null,null)),Nt=qt.exports;r["a"].prototype.axios=I.a,r["a"].use(n["a"]);var jt=[{path:"/Class",component:bt}],zt=new n["a"]({routes:jt}),Bt={name:"home",router:zt,components:{allKq:Nt},data:function(){return{select_type:!0,selectedClaId:null,selectedTeaId:null,classid:"",loading:!0,type:"",allScore:{},options:[{value:"0",label:"原始分"},{value:"1",label:"T值"},{value:"2",label:"Z值"},{value:"3",label:"等第"}],classes:[{value:"921",label:"高三(01)"},{value:"916",label:"高三(02)"},{value:"917",label:"高三(03)"},{value:"918",label:"高三(04)"},{value:"922",label:"高三(05)"},{value:"924",label:"高三(06)"},{value:"919",label:"高三(07)"},{value:"920",label:"高三(08)"},{value:"923",label:"高三(09)"},{value:"925",label:"高三(10)"}]}},computed:{driver:function(){var t=new U.a({});return console.log("click"),t.defineSteps([{element:"#allkq",popover:{title:"考勤信息",description:"所有同学在校期间的考勤信息",position:"bottom"}},{element:"#stream_rank",popover:{title:"考勤排行榜",description:"<strong>交互</strong></br>单击某个同学可在成绩信息中选中该同学，双击可进入该同学主页",position:"bottom"}},{element:"#stream",popover:{title:"考勤信息",description:"<strong>图标描述</strong></br>x轴代表时间,y轴0点为对称轴</br>y轴上的总长度代表该时间内的考勤数量</br>不同颜色代表不同考勤类型</br><strong>交互</strong></br>框选某段时间可更新考勤排行榜",position:"bottom"}},{element:".class",popover:{title:"选择班级",description:"查看不同班级的成绩情况",position:"top"}},{element:".type",popover:{title:"选择指标",description:"查看成绩的不同指标",position:"top"}},{element:".select-type",popover:{title:"选择老师或班级",description:"查看同一老师的教学情况</br>或是查看同一班级的成绩情况",position:"top"}},{element:"#vis",popover:{title:"年级成绩视图",description:"<strong>图表描述</strong></br>每一个矩形代表某次考试某个科目所有班级的考试情况</br>矩形内每一行代表一个班级，展示了该班级此次考试的成绩分布情况</br>每一个班级用直线连接起来，展示了成绩上升和下降情况</br><strong>交互</strong></br>单击某个班级可高亮该班级，双击可进入班级主页。左侧可选择查看不同老师的教学情况",position:"top",opacity:.75}}]),t}},methods:{help:function(){this.driver.start()},drawGrey:function(t,e){var a=15,r=11,n=11,o=100,s=20,i=30,l=100,u=80,d=40,p=a*(o+u)+l-u,h=(r*s+d)*n+i,v=this,f=["#ccc","#aaa","#666","#333"],b=["mes_Score","mes_T_Score","mes_Z_Score","mes_dengdi"],m=[6,6,30,40],y=[2,2,.2,.2],x=[5,5,.5,.5],_=b[t],k=c["D"]("#vis").append("svg").attr("width",p).attr("height",h).attr("id","grade"),w=k.append("g"),C=c["D"]("#app").append("div").attr("class","tooltip").style("opacity",0),S=[{sub_id:"0.0",teachers:[]},{sub_id:"1.0",teachers:[{teacher_id:"269",teacher_name:"马老师"},{teacher_id:"46",teacher_name:"蒋老师"},{teacher_id:"266",teacher_name:"叶老师"},{teacher_id:"240",teacher_name:"孙老师"},{teacher_id:"66",teacher_name:"郑老师"},{teacher_id:"54",teacher_name:"洪老师"},{teacher_id:"53",teacher_name:"唐老师"},{teacher_id:"52",teacher_name:"陈老师"}]},{sub_id:"2.0",teachers:[{teacher_id:"94",teacher_name:"张老师"},{teacher_id:"6",teacher_name:"胡老师"},{teacher_id:"413",teacher_name:"朱老师"},{teacher_id:"373",teacher_name:"吕老师"},{teacher_id:"84",teacher_name:"童老师"},{teacher_id:"85",teacher_name:"吕老师"},{teacher_id:"243",teacher_name:"闵老师"},{teacher_id:"316",teacher_name:"鲁老师"},{teacher_id:"80",teacher_name:"张老师"},{teacher_id:"78",teacher_name:"潘老师"}]},{sub_id:"3.0",teachers:[{teacher_id:"108",teacher_name:"王老师"},{teacher_id:"134",teacher_name:"张老师"},{teacher_id:"112",teacher_name:"王老师"},{teacher_id:"103",teacher_name:"陈老师"},{teacher_id:"128",teacher_name:"高老师"},{teacher_id:"109",teacher_name:"何老师"},{teacher_id:"101",teacher_name:"周老师"},{teacher_id:"97",teacher_name:"陈老师"},{teacher_id:"274",teacher_name:"王老师"},{teacher_id:"26",teacher_name:"程老师"},{teacher_id:"12",teacher_name:"周老师"}]},{sub_id:"4.0",teachers:[{teacher_id:"151",teacher_name:"陈老师"},{teacher_id:"145",teacher_name:"何老师"},{teacher_id:"150",teacher_name:"陈老师"},{teacher_id:"264",teacher_name:"张老师"},{teacher_id:"372",teacher_name:"钱老师"}]},{sub_id:"6.0",teachers:[{teacher_id:"370",teacher_name:"周老师"},{teacher_id:"340",teacher_name:"吴老师"},{teacher_id:"253",teacher_name:"史老师"},{teacher_id:"252",teacher_name:"邵老师"},{teacher_id:"339",teacher_name:"苏老师"},{teacher_id:"219",teacher_name:"陈老师"},{teacher_id:"314",teacher_name:"陈老师"}]},{sub_id:"7.0",teachers:[{teacher_id:"188",teacher_name:"谢老师"},{teacher_id:"186",teacher_name:"周老师"},{teacher_id:"187",teacher_name:"潘老师"},{teacher_id:"185",teacher_name:"刘老师"}]},{sub_id:"8.0",teachers:[{teacher_id:"369",teacher_name:"陈老师"},{teacher_id:"194",teacher_name:"刘老师"},{teacher_id:"281",teacher_name:"王老师"}]},{sub_id:"17.0",teachers:[{teacher_id:"178",teacher_name:"高老师"},{teacher_id:"220",teacher_name:"李老师"},{teacher_id:"223",teacher_name:"陈老师"},{teacher_id:"181",teacher_name:"王老师"}]},{sub_id:"5.0",teachers:[{teacher_id:"170",teacher_name:"俞老师"},{teacher_id:"259",teacher_name:"周老师"},{teacher_id:"164",teacher_name:"林老师"}]},{sub_id:"59.0",teachers:[{teacher_id:"158",teacher_name:"俞老师"},{teacher_id:"157",teacher_name:"王老师"},{teacher_id:"14",teacher_name:"庄老师"}]}],I={"0.0":0,"1.0":1,"2.0":2,"3.0":3,"4.0":4,"5.0":5,"6.0":6,"7.0":7,"8.0":8,"17.0":9,"59.0":10,"9.0":11,"11.0":12,"12.0":13},D=c["A"]().range([0,1]).domain([-(r-1)*s,(r-1)*s]),E=c["o"],A=-1;function T(t){var e=k.append("g").attr("class","examname");e.selectAll(".examTitle").data(t).enter().append("text").attr("fill","black").attr("font-size","14px").attr("text-anchor","middle").attr("x",function(t,e){return(o+u)*e+l}).attr("y",0).attr("dx",o/2).attr("dy","1em").text(function(t){return t}).call(L),c["E"]("tspan").attr("y",-5),document.getElementById("vis").addEventListener("scroll",function(t){c["E"]("tspan").attr("y",this.scrollTop-5)},!1)}function L(t){t.each(function(){var t=c["D"](this),e=t.text(),a=1.1,r=t.attr("x"),n=t.attr("y");t.text(null),t.append("tspan").attr("x",r).attr("y",n).attr("text-anchor","middle").attr("dy",a+"em").text(e.slice(0,10)),t.append("tspan").attr("x",r).attr("y",n).attr("text-anchor","middle").attr("dy",2*a+"em").text(e.slice(10,e.length))})}function q(e){var a=k.append("g").attr("id","subTitle"),n=a.selectAll(".labelBack").data(e).enter().append("rect").attr("x",0).attr("y",function(t,e){return e*(s*r+d)+i}).attr("width",l-10).attr("height",s).attr("fill","#aaa").attr("stroke","black"),o=a.selectAll("subTitle").data(e).enter().append("text").attr("fill","black").attr("class","subname").attr("font-size","14px").attr("text-anchor","left").attr("x",0).attr("y",function(t,e){return e*(s*r+d)+i}).attr("dx","0.5em").attr("dy","1em").text(function(t){return t}),u=S.map(function(t){return t.subIdx=I[t.sub_id],t}).filter(function(e){return t>0?e.subIdx>0:e.subIdx>=0}).sort(function(t,e){return t.subIdx-e.subIdx});u.forEach(function(t){return t.teachers.sort(function(t,e){return parseInt(t.teacher_id)-parseInt(e.teacher_id)})});var p=a.selectAll(".teacher").data(u).enter().append("g").attr("transform",function(t,e){return"translate(0,".concat(e*(s*r+d)+i+s,")")}),h=function(t){p.selectAll(".teaRec".concat(t.teacher_id)).attr("fill","#aaa"),c["E"]("."+B(parseInt(t.teacher_id))).attr("fill","#555")},f=function(t){p.selectAll(".teaRec").attr("fill","white"),c["E"]("."+B(parseInt(t.teacher_id))).attr("fill","white"),null!=v.selectedClaId&&"0"!=v.selectedClaId&&c["E"](".back"+parseInt(v.selectedClaId).toString()).attr("fill","black"),null!=v.selectedTeaId&&v.selectedTeaId>0&&(c["E"]("."+B(v.selectedTeaId)).attr("fill","black"),p.selectAll(".teaRec".concat(v.selectedTeaId)).attr("fill","#555"))},b=function(t){c["E"](".back").attr("fill","white"),v.selectedTeaId=parseInt(t.teacher_id),v.selectedClaId=null,c["E"]("."+B(v.selectedTeaId)).attr("fill","black"),c["E"](".classLine").attr("opacity",0),c["E"](".teaLine-".concat(parseInt(v.selectedTeaId).toString())).attr("opacity",.5),p.selectAll(".teaRec").attr("fill","white"),p.selectAll(".teaRec".concat(v.selectedTeaId)).attr("fill","#555")};p.selectAll("rect").data(function(t){return t.teachers}).enter().append("rect").attr("class",function(t){return"teaRec teaRec".concat(t.teacher_id)}).attr("x",0).attr("y",function(t,e){return e*s}).attr("width",l-10).attr("height",s).attr("fill","white").attr("stroke","black").on("mouseover",h).on("mouseout",f).on("click",b),p.selectAll("text").data(function(t){return t.teachers}).enter().append("text").attr("fill","black").attr("class",function(t){return"teaTitle".concat(t.teacher_id)}).attr("font-size","14px").attr("text-anchor","left").attr("x",0).attr("y",function(t,e){return e*s}).attr("dx","0.5em").attr("dy","1em").text(function(t){return"".concat(t.teacher_name," (").concat(parseInt(t.teacher_id),")")}).on("mouseover",h).on("mouseout",f).on("click",b),document.getElementById("vis").addEventListener("scroll",function(t){var e=this;n.attr("x",this.scrollLeft),o.attr("x",this.scrollLeft),p.attr("transform",function(t,a){return"translate(".concat(e.scrollLeft,",").concat(a*(s*r+d)+i+s,")")})},!1)}function N(t,e){return function(a){return e.map(function(e){return[e,c["t"](a,function(a){return t(e-a)})]})}}function j(t){return function(e){return Math.abs(e/=t)<=1?.75*(1-e*e)/t:0}}function z(t){var e=c["w"]().key(function(t){return t.attrs.subId}).entries(t);e.forEach(function(t){var e=t.key,a=c["w"]().key(function(t){return t.attrs.claId}).entries(t.values);a.forEach(function(t){for(var a=function(a){var r=[[t.values[a].attrs.x+o,t.values[a].attrs.y],[t.values[a+1].attrs.x,t.values[a+1].attrs.y],[t.values[a+1].attrs.x,t.values[a+1].attrs.y+s],[t.values[a].attrs.x+o,t.values[a].attrs.y+s]];w.append("polygon").datum(r).attr("class",function(){var r="classLine classLine-".concat(t.key," classLine-").concat(parseInt(e),"-").concat(t.key);return t.values[a].attrs.teaId==t.values[a+1].attrs.teaId&&(r+=" teaLine-".concat(t.values[a].attrs.teaId)),r}).attr("points",function(t){return t.map(function(t){return[t[0],t[1]].join(",")}).join(" ")}).attr("fill",function(t){return E(D(t[1][1]-t[0][1]))}).attr("stroke","None").attr("opacity",.5)},r=0;r<t.values.length-1;r++)a(r)})})}function B(t){var e=t>=0?"backTea".concat(parseInt(t).toString()):"backTea-".concat(parseInt(-t).toString());return e}function $(e,a){var n=[];a.forEach(function(t){return n.push.apply(n,Object(St["a"])(t.data))});var l=[{attrs:{avg:n.length>0?c["t"](n).toFixed(2):0,claId:"0",claName:"年级",teaId:A},data:n}];A-=1,l.push.apply(l,Object(St["a"])(a)),l.forEach(function(a,n){a.attrs.subId=e.sub_id,a.attrs.x=e.x,a.attrs.y=(t>0?I[e.sub_id]-1:I[e.sub_id])*(s*r+d)+i+n*s});var u=k.append("g").attr("class","area").attr("transform","translate(".concat(e.x,",").concat((t>0?I[e.sub_id]-1:I[e.sub_id])*(s*r+d)+i,")")),p=c["A"]().range([0,o]).domain([+e.xmin,+e.xmax]),h=c["A"]().range([s,0]).domain([0,+e.ymax]),b=50,m=c["q"]().x(function(t){return t[0]}).y(function(t){return t[1]}),g=N(j(y[t]),p.ticks(x[t])),_=function(t){C.transition().duration(200).style("opacity",.9);var e="".concat(t.attrs.claName,"<br/>平均分: ").concat(t.attrs.avg.toString());t.attrs.teaId>0&&(e+="<br/>教师: ".concat(t.attrs.teaName)),C.html(e).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px"),v.select_type?c["E"](".back"+parseInt(t.attrs.claId).toString()).attr("fill","#555"):(c["E"]("."+B(parseInt(t.attrs.teaId))).attr("fill","#555"),t.attrs.teaId>0&&c["E"](".teaRec".concat(t.attrs.teaId)).attr("fill","#aaa"))},w=function(t){C.transition().duration(500).style("opacity",0),c["E"](".back").attr("fill","white"),null!=v.selectedClaId&&"0"!=v.selectedClaId&&c["E"](".back"+parseInt(v.selectedClaId).toString()).attr("fill","black"),t.attrs.teaId>0&&c["E"](".teaRec".concat(t.attrs.teaId)).attr("fill","white"),null!=v.selectedTeaId&&v.selectedTeaId>0&&(c["E"]("."+B(v.selectedTeaId)).attr("fill","black"),c["E"](".teaRec".concat(v.selectedTeaId)).attr("fill","#555"))},S=function(t){c["E"](".back").attr("fill","white"),v.select_type?(v.selectedClaId=t.attrs.claId,v.selectedTeaId=null,"0"==v.selectedClaId?c["E"](".classLine").attr("opacity",.5):(c["E"](".back"+parseInt(v.selectedClaId).toString()).attr("fill","black"),c["E"](".classLine").attr("opacity",0),c["E"](".classLine-".concat(parseInt(v.selectedClaId).toString())).attr("opacity",.5)),c["E"](".teaRec").attr("fill","white")):(v.selectedTeaId=parseInt(t.attrs.teaId),v.selectedClaId=null,v.selectedTeaId<0?c["E"](".classLine").attr("opacity",.5):(c["E"]("."+B(v.selectedTeaId)).attr("fill","black"),c["E"](".classLine").attr("opacity",0),c["E"](".teaLine-".concat(parseInt(v.selectedTeaId).toString())).attr("opacity",.5),c["E"](".teaRec").attr("fill","white"),c["E"](".teaRec".concat(v.selectedTeaId)).attr("fill","#555")))},D=function(t){zt.push({path:"/class",query:{id:t.attrs["claId"]}}),zt.go()};u.selectAll(".back").data(l).enter().append("rect").attr("class",function(t){var e="back back".concat(parseInt(t.attrs.claId).toString());return e+=" "+B(t.attrs.teaId),e}).attr("fill","white").attr("stroke","None").attr("stroke-width",3).attr("width",o).attr("height",s).attr("transform",function(t,e){return"translate(0,".concat(e*s,")")}).on("mouseover",_).on("mouseout",w).on("click",S).on("dblclick",D);var E=l.map(function(t){var a=[[e.xmin,0]];return a.push.apply(a,Object(St["a"])(g(t.data))),a.push([e.xmax,0]),a}),T=function(t,a){return"density-"+e.sub_id+"-"+e.exam_id+"-"+a.toString()};E.forEach(function(t,a){var r=b*c["s"](t,function(t){return t[1]})/e.ymax*s,n=0;u.append("clipPath").attr("id",T(t,a)).append("path").attr("transform","translate(0,".concat(a*s,")")).attr("fill","steelblue").attr("stroke-linejoin","round").datum(t).attr("d",c["q"]().curve(c["j"]).x(function(t){return p(t[0])}).y(function(t){return h(b*t[1])}));while(r>0)u.append("rect").attr("x",0).attr("y",(a-n)*s).attr("width",o).attr("height",s).attr("clip-path","url(#".concat(T(t,a),")")).attr("fill",f[n]).attr("opacity",1).attr("transform","translate(0,".concat(s*n,")")),n+=1,r-=s}),u.selectAll(".avgLine").data(l).enter().append("path").attr("transform",function(t,e){return"translate(0,".concat(e*s,")")}).attr("d",function(t){return m([[p(+t.attrs.avg),0],[p(+t.attrs.avg),s]])}).attr("stroke","black").attr("opacity",.6).attr("stroke-width",2),u.append("rect").attr("stroke","black").attr("fill","None").attr("stroke-width",3).attr("width",o).attr("height",s*r),u.append("rect").attr("stroke","black").attr("fill","None").attr("stroke-width",1).attr("width",o).attr("height",s),u.append("text").attr("x",0).attr("text-anchor","start").attr("font-size","10px").attr("y",s*r).attr("dy","1em").text((+e.xmin+1).toFixed(2).toString()),u.append("text").attr("x",o).attr("text-anchor","end").attr("font-size","10px").attr("y",s*r).attr("dy","1em").text((+e.xmax-1).toFixed(2).toString())}function W(e){var a=[];return e.forEach(function(e,r){for(var n=e.subScore.sort(function(t,e){return parseInt(t.mes_sub_id)-parseInt(e.mes_sub_id)}),s=function(s){if(t>0&&0==s)return"continue";var i=n[s],d=c["u"](i.classScore.map(function(t){return c["u"](t.scores.map(function(t){return+t[_]}))})),p=c["s"](i.classScore.map(function(t){return c["s"](t.scores.map(function(t){return+t[_]}))})),h=[];"undefined"!=typeof d&&"undefined"!=typeof p&&i.classScore.forEach(function(t){if(t.scores.length>0){var e=c["t"](t.scores.map(function(t){return+t[_]})).toFixed(2),a={avg:e,claName:t.cla_Name,claId:parseInt(t.cla_id),teaId:"无信息"==t.teacherid?A:parseInt(t.teacherid),teaName:t.teachername};"无信息"==t.teacherid&&(A-=1);var r=t.scores.map(function(t){return+t[_]});h.push({data:r,attrs:a})}}),h.sort(function(t,e){return e.attrs.avg-t.attrs.avg}),a.push({attrs:{x:r*(o+u)+l,xmin:(+d-1).toFixed(2),xmax:(+p+1).toFixed(2),ymax:"0.0"==i.mes_sub_id?1:m[t],sub_id:i.mes_sub_id,exam_id:e.exam_number},data:h})},i=0;i<n.length;i++)s(i)}),a}function O(t){var e=new Map;t.forEach(function(t){return t.data.forEach(function(t){return e.set(t.attrs.claId,t.attrs.claName)})}),c["D"]("#class").selectAll("option").data(Object(St["a"])(e.entries()).sort()).enter().append("option").attr("value",function(t){return t[0]}).text(function(t){return t[1]}),g()("#class").change(function(){v.selectedClaId=g()(this).find("option:selected").attr("value"),v.selectedTeaId=null,w.selectAll(".classLine").attr("opacity",0),w.selectAll(".classLine-"+v.selectedClaId).attr("opacity",1),c["E"](".back").attr("fill","white"),c["E"](".back"+v.selectedClaId).attr("fill","black"),c["E"](".teaRec").attr("fill","white")})}var M=this.allScore.data.map(function(t){return t.exam_numname}),F=W(this.allScore.data);O(F),F.forEach(function(t){return $(t.attrs,t.data)}),z(c["E"](".back").data()),T(M),q(e)},selectType:function(t){c["D"]("#grade").remove();var e={"1.0":{name:"语文",score:150},"2.0":{name:"数学",value:150},"3.0":{name:"英语",score:150},"4.0":{name:"物理",value:100},"5.0":{name:"化学",score:100},"6.0":{name:"生物",value:100},"7.0":{name:"历史",score:100},"8.0":{name:"地理",value:100},"9.0":{name:"体育",score:100},"11.0":{name:"音乐",value:100},"12.0":{name:"美术",value:100},"0.0":{name:"总分",value:800},"17.0":{name:"政治",score:100},"59.0":{name:"技术",value:100}},a=["0.0","1.0","2.0","3.0","4.0","5.0","6.0","7.0","8.0","17.0","59.0"],r=t,n=a.filter(function(t,e){return r>0?e>0:e>=0}).map(function(t){return e[t].name});this.drawGrey(t,n)},selectClass:function(t){this.selectedClaId=t,this.selectedTeaId=null,"915"!==this.selectedClaId&&"914"!==this.selectedClaId||alert("国际班成绩信息缺失"),c["D"]("#vis").select("svg").selectAll(".classLine").attr("opacity",0),c["D"]("#vis").select("svg").selectAll(".classLine-"+this.selectedClaId).attr("opacity",1),c["E"](".back").attr("fill","white"),c["E"](".back"+this.selectedClaId).attr("fill","black")},changeLinkType:function(t){console.log(t)}},mounted:function(){var t=this;c["E"](".toprightchoose").remove(),c["E"](".toprightcos").remove(),c["E"](".classname").remove();var e=this;I.a.get("http://cuteanian.top/eduvis/mock/allScore_521.json").then(function(t){e.allScore=t.data;var a={"1.0":{name:"语文",score:150},"2.0":{name:"数学",value:150},"3.0":{name:"英语",score:150},"4.0":{name:"物理",value:100},"5.0":{name:"化学",score:100},"6.0":{name:"生物",value:100},"7.0":{name:"历史",score:100},"8.0":{name:"地理",value:100},"9.0":{name:"体育",score:100},"11.0":{name:"音乐",value:100},"12.0":{name:"美术",value:100},"0.0":{name:"总分",value:800},"17.0":{name:"政治",score:100},"59.0":{name:"技术",value:100}},r=["0.0","1.0","2.0","3.0","4.0","5.0","6.0","7.0","8.0","17.0","59.0"],n=0,o=r.filter(function(t,e){return n>0?e>0:e>=0}).map(function(t){return a[t].name});e.drawGrey(n,o),e.loading=!1}).catch(function(t){console.log(t)});var a=document.getElementById("helpbutton");a.addEventListener("click",function(e){e.target;event.stopPropagation(),t.help()})}},$t=Bt,Wt=(a("af66"),Object(p["a"])($t,wt,Ct,!1,null,null,null)),Ot=Wt.exports,Mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"choose"}},[a("div",{staticClass:"help"},[a("el-button",{attrs:{round:"",id:"helpbutton"}},[t._v("引导")])],1),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal",router:""}},["/Choose"==this.$route.path?a("el-menu-item",{staticClass:"toprightchoose"},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.getValue},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{value:"total",selected:"selected",label:"总选课情况"}},[t._v(" 总选课情况 ")]),a("el-option",{attrs:{value:"class",label:"班级选课情况"}},[t._v(" 班级选课情况 ")])],1),"class"==t.select?a("div",[t._v("双击班级进入班级主页")]):t._e()],1):t._e()],1),t._m(0),a("div",{staticClass:"blow"},[a("div",{attrs:{id:"heatmap"}}),a("div",[a("div",{attrs:{id:"twoChoose"}}),a("div",{attrs:{id:"selectSex"}},[a("div",[t._v(t._s(t.className))]),a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"性别","inactive-text":"总体"},on:{change:t.changeLinkType},model:{value:t.select_type,callback:function(e){t.select_type=e},expression:"select_type"}}),t.select_type?a("div",[t._v("左上女生，右下男生")]):t._e()],1)])])],1)},Ft=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"barchart"}},[a("div",{attrs:{id:"threebarchart"}}),a("div",{attrs:{id:"singlebarchart"}})])}];a("f531");r["a"].prototype.axios=I.a,r["a"].use(n["a"]);var Yt=[{path:"/Class",component:bt}],Rt=new n["a"]({routes:Yt}),Gt={name:"choose",data:function(){return{threeChoose:[{variable:"地理",group:"地理,技术,政治",value:"6"},{variable:"技术",group:"地理,技术,政治",value:"6"},{variable:"政治",group:"地理,技术,政治",value:"6"},{variable:"化学",group:"化学,地理,物理",value:"33"},{variable:"地理",group:"化学,地理,物理",value:"33"},{variable:"物理",group:"化学,地理,物理",value:"33"},{variable:"历史",group:"历史,物理,生物",value:"6"},{variable:"物理",group:"历史,物理,生物",value:"6"},{variable:"生物",group:"历史,物理,生物",value:"6"},{variable:"化学",group:"化学,政治,物理",value:"12"},{variable:"政治",group:"化学,政治,物理",value:"12"},{variable:"物理",group:"化学,政治,物理",value:"12"},{variable:"化学",group:"化学,技术,生物",value:"9"},{variable:"技术",group:"化学,技术,生物",value:"9"},{variable:"生物",group:"化学,技术,生物",value:"9"},{variable:"化学",group:"化学,历史,物理",value:"8"},{variable:"历史",group:"化学,历史,物理",value:"8"},{variable:"物理",group:"化学,历史,物理",value:"8"},{variable:"化学",group:"化学,历史,政治",value:"9"},{variable:"历史",group:"化学,历史,政治",value:"9"},{variable:"政治",group:"化学,历史,政治",value:"9"},{variable:"技术",group:"技术,物理,生物",value:"14"},{variable:"物理",group:"技术,物理,生物",value:"14"},{variable:"生物",group:"技术,物理,生物",value:"14"},{variable:"化学",group:"化学,技术,物理",value:"30"},{variable:"技术",group:"化学,技术,物理",value:"30"},{variable:"物理",group:"化学,技术,物理",value:"30"},{variable:"化学",group:"化学,物理,生物",value:"57"},{variable:"物理",group:"化学,物理,生物",value:"57"},{variable:"生物",group:"化学,物理,生物",value:"57"},{variable:"地理",group:"地理,技术,物理",value:"17"},{variable:"技术",group:"地理,技术,物理",value:"17"},{variable:"物理",group:"地理,技术,物理",value:"17"},{variable:"地理",group:"地理,物理,生物",value:"28"},{variable:"物理",group:"地理,物理,生物",value:"28"},{variable:"生物",group:"地理,物理,生物",value:"28"},{variable:"化学",group:"化学,历史,地理",value:"4"},{variable:"历史",group:"化学,历史,地理",value:"4"},{variable:"地理",group:"化学,历史,地理",value:"4"},{variable:"历史",group:"历史,政治,生物",value:"12"},{variable:"政治",group:"历史,政治,生物",value:"12"},{variable:"生物",group:"历史,政治,生物",value:"12"},{variable:"化学",group:"化学,历史,生物",value:"12"},{variable:"历史",group:"化学,历史,生物",value:"12"},{variable:"生物",group:"化学,历史,生物",value:"12"},{variable:"历史",group:"历史,地理,政治",value:"6"},{variable:"地理",group:"历史,地理,政治",value:"6"},{variable:"政治",group:"历史,地理,政治",value:"6"},{variable:"化学",group:"化学,政治,生物",value:"19"},{variable:"政治",group:"化学,政治,生物",value:"19"},{variable:"生物",group:"化学,政治,生物",value:"19"},{variable:"政治",group:"政治,物理,生物",value:"13"},{variable:"物理",group:"政治,物理,生物",value:"13"},{variable:"生物",group:"政治,物理,生物",value:"13"},{variable:"历史",group:"历史,地理,物理",value:"3"},{variable:"地理",group:"历史,地理,物理",value:"3"},{variable:"物理",group:"历史,地理,物理",value:"3"},{variable:"技术",group:"技术,政治,生物",value:"7"},{variable:"政治",group:"技术,政治,生物",value:"7"},{variable:"生物",group:"技术,政治,生物",value:"7"},{variable:"历史",group:"历史,地理,生物",value:"8"},{variable:"地理",group:"历史,地理,生物",value:"8"},{variable:"生物",group:"历史,地理,生物",value:"8"},{variable:"地理",group:"地理,政治,物理",value:"6"},{variable:"政治",group:"地理,政治,物理",value:"6"},{variable:"物理",group:"地理,政治,物理",value:"6"},{variable:"地理",group:"地理,政治,生物",value:"11"},{variable:"政治",group:"地理,政治,生物",value:"11"},{variable:"生物",group:"地理,政治,生物",value:"11"},{variable:"化学",group:"化学,地理,生物",value:"14"},{variable:"地理",group:"化学,地理,生物",value:"14"},{variable:"生物",group:"化学,地理,生物",value:"14"},{variable:"历史",group:"历史,地理,技术",value:"5"},{variable:"地理",group:"历史,地理,技术",value:"5"},{variable:"技术",group:"历史,地理,技术",value:"5"},{variable:"地理",group:"地理,技术,生物",value:"7"},{variable:"技术",group:"地理,技术,生物",value:"7"},{variable:"生物",group:"地理,技术,生物",value:"7"},{variable:"化学",group:"化学,地理,技术",value:"7"},{variable:"地理",group:"化学,地理,技术",value:"7"},{variable:"技术",group:"化学,地理,技术",value:"7"},{variable:"历史",group:"历史,政治,物理",value:"1"},{variable:"政治",group:"历史,政治,物理",value:"1"},{variable:"物理",group:"历史,政治,物理",value:"1"},{variable:"技术",group:"技术,政治,物理",value:"4"},{variable:"政治",group:"技术,政治,物理",value:"4"},{variable:"物理",group:"技术,政治,物理",value:"4"},{variable:"化学",group:"化学,地理,政治",value:"7"},{variable:"地理",group:"化学,地理,政治",value:"7"},{variable:"政治",group:"化学,地理,政治",value:"7"},{variable:"历史",group:"历史,技术,生物",value:"3"},{variable:"技术",group:"历史,技术,生物",value:"3"},{variable:"生物",group:"历史,技术,生物",value:"3"},{variable:"化学",group:"化学,历史,技术",value:"2"},{variable:"历史",group:"化学,历史,技术",value:"2"},{variable:"技术",group:"化学,历史,技术",value:"2"},{variable:"历史",group:"历史,技术,物理",value:"1"},{variable:"技术",group:"历史,技术,物理",value:"1"},{variable:"物理",group:"历史,技术,物理",value:"1"},{variable:"化学",group:"化学,技术,政治",value:"1"},{variable:"技术",group:"化学,技术,政治",value:"1"},{variable:"政治",group:"化学,技术,政治",value:"1"}],singleChoose:"",select:"class",width:.5*screen.width,height:.25*screen.height,subs:["历史","技术","政治","地理","生物","化学","物理"],choose:[["历史","政治","物理"],["历史","技术","物理"],["化学","技术","政治"],["化学","历史","技术"],["历史","地理","物理"],["历史","技术","生物"],["化学","历史","地理"],["技术","政治","物理"],["历史","地理","技术"],["地理","技术","政治"],["历史","物理","生物"],["历史","地理","政治"],["地理","政治","物理"],["技术","政治","生物"],["地理","技术","生物"],["化学","地理","技术"],["化学","地理","政治"],["化学","历史","物理"],["历史","地理","生物"],["化学","技术","生物"],["化学","历史","政治"],["地理","政治","生物"],["化学","政治","物理"],["历史","政治","生物"],["化学","历史","生物"],["政治","物理","生物"],["技术","物理","生物"],["化学","地理","生物"],["地理","技术","物理"],["化学","政治","生物"],["地理","物理","生物"],["化学","技术","物理"],["化学","地理","物理"],["化学","物理","生物"]],singleNum:0,threeNum:0,className:"",margin:{left:100,right:0,bottom:100,top:0},maxx:50,maxy:20,activeIndex:"",select_type:!0,twoChoose:[{sub1:"地理",sub2:"技术",value:47,"男":25,"女":22},{sub1:"技术",sub2:"地理",value:47,"男":25,"女":22},{sub1:"地理",sub2:"政治",value:43,"男":8,"女":35},{sub1:"政治",sub2:"地理",value:43,"男":8,"女":35},{sub1:"技术",sub2:"政治",value:19,"男":6,"女":13},{sub1:"政治",sub2:"技术",value:19,"男":6,"女":13},{sub1:"化学",sub2:"地理",value:74,"男":38,"女":36},{sub1:"地理",sub2:"化学",value:74,"男":38,"女":36},{sub1:"化学",sub2:"物理",value:168,"男":122,"女":46},{sub1:"物理",sub2:"化学",value:168,"男":122,"女":46},{sub1:"地理",sub2:"物理",value:95,"男":56,"女":39},{sub1:"物理",sub2:"地理",value:95,"男":56,"女":39},{sub1:"历史",sub2:"技术",value:13,"男":7,"女":6},{sub1:"技术",sub2:"历史",value:13,"男":7,"女":6},{sub1:"历史",sub2:"物理",value:23,"男":15,"女":8},{sub1:"物理",sub2:"历史",value:23,"男":15,"女":8},{sub1:"技术",sub2:"物理",value:71,"男":51,"女":20},{sub1:"物理",sub2:"技术",value:71,"男":51,"女":20},{sub1:"历史",sub2:"生物",value:47,"女":37,"男":10},{sub1:"生物",sub2:"历史",value:47,"女":37,"男":10},{sub1:"物理",sub2:"生物",value:139,"女":56,"男":83},{sub1:"生物",sub2:"物理",value:139,"女":56,"男":83},{sub1:"化学",sub2:"政治",value:53,"女":46,"男":7},{sub1:"政治",sub2:"化学",value:53,"女":46,"男":7},{sub1:"政治",sub2:"物理",value:40,"女":29,"男":11},{sub1:"物理",sub2:"政治",value:40,"女":29,"男":11},{sub1:"化学",sub2:"技术",value:56,"女":16,"男":40},{sub1:"技术",sub2:"化学",value:56,"女":16,"男":40},{sub1:"化学",sub2:"生物",value:136,"女":72,"男":64},{sub1:"生物",sub2:"化学",value:136,"女":72,"男":64},{sub1:"技术",sub2:"生物",value:44,"女":27,"男":17},{sub1:"生物",sub2:"技术",value:44,"女":27,"男":17},{sub1:"化学",sub2:"历史",value:37,"女":26,"男":11},{sub1:"历史",sub2:"化学",value:37,"女":26,"男":11},{sub1:"历史",sub2:"政治",value:32,"女":24,"男":8},{sub1:"政治",sub2:"历史",value:32,"女":24,"男":8},{sub1:"政治",sub2:"生物",value:67,"女":59,"男":8},{sub1:"生物",sub2:"政治",value:67,"女":59,"男":8},{sub1:"地理",sub2:"生物",value:73,"女":57,"男":16},{sub1:"生物",sub2:"地理",value:73,"女":57,"男":16},{sub1:"历史",sub2:"地理",value:28,"女":19,"男":9},{sub1:"地理",sub2:"历史",value:28,"女":19,"男":9}],twoChooseSex:[{sex:"boy",sub1:"地理",sub2:"技术",value:25,"男":25,"女":22},{sex:"girl",sub1:"技术",sub2:"地理",value:22,"男":25,"女":22},{sex:"boy",sub1:"地理",sub2:"政治",value:8,"男":8,"女":35},{sex:"girl",sub1:"政治",sub2:"地理",value:35,"男":8,"女":35},{sex:"girl",sub1:"技术",sub2:"政治",value:13,"男":6,"女":13},{sex:"boy",sub1:"政治",sub2:"技术",value:6,"男":6,"女":13},{sex:"boy",sub1:"化学",sub2:"地理",value:38,"男":38,"女":36},{sex:"girl",sub1:"地理",sub2:"化学",value:36,"男":38,"女":36},{sex:"girl",sub1:"化学",sub2:"物理",value:46,"男":122,"女":46},{sex:"boy",sub1:"物理",sub2:"化学",value:122,"男":122,"女":46},{sex:"girl",sub1:"地理",sub2:"物理",value:39,"男":56,"女":39},{sex:"boy",sub1:"物理",sub2:"地理",value:56,"男":56,"女":39},{sex:"girl",sub1:"历史",sub2:"技术",value:6,"男":7,"女":6},{sex:"boy",sub1:"技术",sub2:"历史",value:7,"男":7,"女":6},{sex:"girl",sub1:"历史",sub2:"物理",value:8,"男":15,"女":8},{sex:"boy",sub1:"物理",sub2:"历史",value:15,"男":15,"女":8},{sex:"girl",sub1:"技术",sub2:"物理",value:20,"男":51,"女":20},{sex:"boy",sub1:"物理",sub2:"技术",value:51,"男":51,"女":20},{sex:"girl",sub1:"历史",sub2:"生物",value:37,"女":37,"男":10},{sex:"boy",sub1:"生物",sub2:"历史",value:10,"女":37,"男":10},{sex:"boy",sub1:"物理",sub2:"生物",value:83,"女":56,"男":83},{sex:"girl",sub1:"生物",sub2:"物理",value:56,"女":56,"男":83},{sex:"boy",sub1:"化学",sub2:"政治",value:7,"女":46,"男":7},{sex:"girl",sub1:"政治",sub2:"化学",value:46,"女":46,"男":7},{sex:"girl",sub1:"政治",sub2:"物理",value:29,"女":29,"男":11},{sex:"boy",sub1:"物理",sub2:"政治",value:11,"女":29,"男":11},{sex:"boy",sub1:"化学",sub2:"技术",value:40,"女":16,"男":40},{sex:"girl",sub1:"技术",sub2:"化学",value:16,"女":16,"男":40},{sex:"boy",sub1:"化学",sub2:"生物",value:64,"女":72,"男":64},{sex:"girl",sub1:"生物",sub2:"化学",value:72,"女":72,"男":64},{sex:"girl",sub1:"技术",sub2:"生物",value:27,"女":27,"男":17},{sex:"boy",sub1:"生物",sub2:"技术",value:17,"女":27,"男":17},{sex:"boy",sub1:"化学",sub2:"历史",value:11,"女":26,"男":11},{sex:"girl",sub1:"历史",sub2:"化学",value:26,"女":26,"男":11},{sex:"girl",sub1:"历史",sub2:"政治",value:24,"女":24,"男":8},{sex:"boy",sub1:"政治",sub2:"历史",value:8,"女":24,"男":8},{sex:"girl",sub1:"政治",sub2:"生物",value:59,"女":59,"男":8},{sex:"boy",sub1:"生物",sub2:"政治",value:8,"女":59,"男":8},{sex:"girl",sub1:"地理",sub2:"生物",value:57,"女":57,"男":16},{sex:"boy",sub1:"生物",sub2:"地理",value:16,"女":57,"男":16},{sex:"girl",sub1:"历史",sub2:"地理",value:19,"女":19,"男":9},{sex:"boy",sub1:"地理",sub2:"历史",value:9,"女":19,"男":9}]}},mounted:function(){var t=this,e=this;this.drawTwoChoose(.3,this.twoChooseSex,100),this.drawHeatMap(),document.getElementById("barchart").style.height=.2*this.height*10+"px",I.a.get("http://cuteanian.top/eduvis/mock/classChooseData.json").then(function(t){e.chooseData=t.data.data,e.chooseData.sort(function(t,e){return parseInt(t.cla_id)-parseInt(e.cla_id)});for(var a=0;a<e.chooseData.length;a++)e.drawSingle("#singlebarchart",e.subs,e.chooseData[a].singlechoose,e.chooseData[a].cla_id+""+e.chooseData[a].cla_Name,.2,30,.3),e.drawSingle("#threebarchart",e.choose,e.chooseData[a].threechoose,e.chooseData[a].cla_id+""+e.chooseData[a].cla_Name,.2,10,1)}),c["E"](".toprightcos").remove(),c["E"](".classname").remove();var a=document.getElementsByClassName("toprightchoose")[0],r=document.getElementsByClassName("el-menu-demo")[0];r.insertBefore(a,r.childNodes[5]);var n=document.getElementById("helpbutton");n.addEventListener("click",function(e){e.target;event.stopPropagation(),t.help()})},computed:{xScale:function(){var t={top:50,right:0,bottom:100,left:100};t.right=this.margin.right,t.left=this.margin.left;var e=this.width-t.left-t.right,a=(this.height,t.top,t.bottom,c["z"]().range([0,e]).padding(.01));return a},yScale:function(){var t=c["z"]().range([a,0]).domain(this.subs).padding(.01),e={top:0,right:0,bottom:100,left:0};e.bottom=this.margin.bottom,e.top=this.margin.top;this.width,e.left,e.right;var a=this.height-e.top-e.bottom;return t.range([a-20,0]),t}},methods:{help:function(){var t=new U.a({});t.defineSteps([{element:".el-select",popover:{title:"选择查看总体选课情况或按班级查看",position:"bottom"}},{element:"#twoChoose",popover:{title:"两种科目选课组合",description:"<strong>图表描述</strong></br>每一个矩形代表一种选课方式，颜色越深代表选择人数越多</br>",position:"top"}},{element:"#selectSex",popover:{title:"切换总体或性别",description:"选择切换总体或性别</br>性别条件下左上女生，右下男生",position:"left"}},{element:"#threebarchart",popover:{title:"三种科目选课组合",description:"<strong>图表描述</strong></br>x轴代表不同组合,y轴代表人数</br>粉色女生，蓝色男生</br><strong>交互</strong></br>按班级查看时单击某个班级可查看该班级选课两种科目组合情况，双击可进入班级主页",position:"bottom"}},{element:"#singlebarchart",popover:{title:"单种科目选课情况",description:"<strong>图表描述</strong></br>x轴代表不同科目,y轴代表人数</br>粉色女生，蓝色男生</br><strong>交互</strong></br>按班级查看时单击某个班级可查看该班级选课两种科目组合情况，双击可进入班级主页",position:"left"}},{element:"#heatmap",popover:{title:"选课分布",description:"<strong>图表描述</strong></br>纵轴从上到下按照单科选择人数由多到少排序</br>横轴从左到右按照不同组合选择人数由少至多排序</br>颜色从浅到深代表人数由少至多。",position:"top"}}]),t.start()},drawSingle:function(t,e,a,r,n,o,s){var i={top:10,right:20,bottom:5,left:100};i.right=this.margin.right,i.left=this.margin.left;var l=this.width-i.left-i.right,u=this.height*n-i.top-i.bottom,d=this.xScale;d.domain(e),d.range([0,l*s]);var p=c["D"](t).append("svg").attr("class",r).attr("width",function(t,e){return s<1?(l+i.left+i.right)*s+100:(l+i.left+i.right)*s}).attr("height",u+i.top+i.bottom).on("click",w).on("dblclick",C),h=p.append("g").attr("transform","translate("+i.left+","+i.top+")");"#threebarchart"==t&&p.append("text").text(r).attr("classid",r).attr("x",0).attr("y",u).style("font-size","14px");var v=[[0,u+3],[l*s,u+3]],f=c["q"]().x(function(t,e){return t[0]}).y(function(t,e){return t[1]});h.append("path").datum(v).attr("class","line").attr("d",f);var b=c["D"]("#app").append("div").attr("class","tooltip").style("opacity",0);this.threeNum=a;var m=c["F"]().keys(["男","女"])(a),g=c["A"]().domain([0,o]).rangeRound([u-i.bottom,i.top]),y={"男":"#D6EAF8","女":"#FCE4EC"};function x(t,e){b.transition().duration(200).style("opacity",.9);var a="";a=0==t[0]&t[1]==t.data["男"]?"男":0==t[0]&t[1]==t.data["女"]?"女":0==t[0]&t[1]!==t.data.total?"男":"女",b.html(t.data.sub+"<br/>"+a+t.data[a].toString()).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px")}function _(t,e){b.transition().duration(500).style("opacity",0)}var k=this;function w(t,e){var a=this.getAttribute("class"),r=a[0]+a[1]+a[2];for(k.className=a.slice(3,a.length),console.log(k.chooseData),e=0;e<k.chooseData.length;e++)k.chooseData[e].cla_id==r&&(k.twoChooseSex=k.chooseData[e].twochoosesex,k.twoChoose=k.chooseData[e].twochoose,0==k.select_type?k.drawTwoChoose(.3,k.twoChoose,100):k.drawTwoChoose(.3,k.twoChooseSex,100))}function C(t){var e=this.getAttribute("class"),a=e[0]+e[1]+e[2];console.log(a),Rt.push({path:"/class",query:{id:a}}),Rt.go()}var S=h.append("g").selectAll("g").data(m).join("g").attr("fill",function(t){return y[t.key]}).selectAll("rect").data(function(t){return t}).join("rect");S.transition().duration(2e3).attr("x",function(t,e){return d(t.data.sub)}).attr("y",function(t){return g(t[1])}).attr("height",function(t){return g(t[0])-g(t[1])}).attr("width",d.bandwidth()),S.on("mouseover",x).on("mouseout",_),this.drawYaxis(m,p,n,o)},drawXaxis:function(t,e){var a={top:0,right:20,bottom:100,left:0},r=this.width*e-a.left-a.right,n=this.height-a.top-a.bottom,o=c["A"]().rangeRound([0,r]);o.domain([0,this.maxx]);var s=c["b"](o);t.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+(n+5)+")").call(s)},drawYaxis:function(t,e,a,r){var n={top:10,right:20,bottom:0,left:100};n.right=this.margin.right,n.left=this.margin.left;this.width,n.left,n.right;var o=this.height*a-n.top-n.bottom,s=c["A"]().domain([0,r]).rangeRound([o-n.bottom,n.top]),i=function(t){return t.attr("transform","translate("+n.left+",0)").call(c["c"](s).ticks(3)).call(function(t){return t.selectAll(".domain").remove()})};e.append("g").call(i)},drawHeatMap:function(){var t={top:20,right:40,bottom:0,left:100};t.right=this.margin.right,t.left=this.margin.left;var e=this.width-t.left-t.right,a=this.height-t.top-t.bottom,r=c["D"]("#app").append("div").attr("class","tooltip").attr("height",100).style("opacity",0),n=c["D"]("#heatmap").append("svg").attr("width",e+t.left+t.right).attr("height",a+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")"),o=this.xScale;o.domain(this.choose).range([0,e]),console.log(),n.append("g").attr("transform","translate(0,"+this.yScale.range()[0]+")").call(c["b"](o)).selectAll("text").attr("transform","rotate(80)translate(55,-4)").style("font-size","15px");var s=this.yScale;n.append("g").attr("transform","translate(0,0)").call(c["c"](s)).selectAll("text").style("font-size","15px");var i=c["A"]().range(["white","black"]).domain([0,80]);function l(t,e){r.transition().duration(200).style("opacity",.9),r.html("单科:"+t.variable.toString()+"<br/>选择:"+t.group.toString()+"<br/>"+t.value.toString()).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px")}function u(){r.transition().duration(500).style("opacity",0)}n.selectAll().data(this.threeChoose,function(t){return t.group+":"+t.variable}).enter().append("rect").attr("x",function(t){return o(t.group)}).attr("y",function(t){return s(t.variable)}).attr("rx",10).attr("ry",10).attr("width",o.bandwidth()).attr("height",s.bandwidth()).style("fill",function(t){return i(t.value)}).style("stroke","black").style("stroke-width","1px").on("mouseover",l).on("mouseout",u)},drawTwoChoose:function(t,e,a){var r={top:20,right:40,bottom:0,left:100};r.right=this.margin.right,r.left=this.margin.left;var n=this.width-r.left-r.right,o=(this.height,r.top,r.bottom,c["D"]("#app").append("div").attr("class","tooltip").attr("height",100).style("opacity",0));function s(t,e){o.transition().duration(200).style("opacity",.9),o.html("选择:"+t["sub1"]+","+t["sub2"]+":"+t["value"].toString()).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px"),c["E"](".dot-"+t.mes_StudentID.toString()).attr("fill","#333"),vis.selectAll(".personLine").attr("opacity",.5)}function i(){o.transition().duration(500).style("opacity",0)}c["D"]("#twoChoose").selectAll("svg").remove();var l=c["D"]("#twoChoose").append("svg").attr("width",n*t+140).attr("height",this.yScale.range()[0]+50).append("g").attr("transform","translate("+r.left+","+r.top+")"),u=this.xScale;u.domain(this.subs),u.range([0,n*t]),console.log(),l.append("g").attr("transform","translate(0,"+this.yScale.range()[0]+")").call(c["b"](u)).selectAll("text").style("font-size","15px");var d=this.yScale;l.append("g").attr("transform","translate(0,0)").call(c["c"](d)).selectAll("text").style("font-size","15px");var p=c["A"]().range(["white","black"]).domain([0,80]),h=l.selectAll().data(e,function(t){return t.sub1+":"+t.sub2}).enter().append("rect");h.transition().duration(1e3).attr("x",function(t){return u(t.sub1)}).attr("y",function(t){return d(t.sub2)}).attr("rx",10).attr("ry",10).attr("width",u.bandwidth()).attr("height",d.bandwidth()).style("stroke","black").style("stroke-width","1px").style("fill",function(t){return p(t.value)}),h.on("mouseover",s).on("mouseout",i)},drawTwoChooseSex:function(t,e,a,r){var n={top:20,right:40,bottom:0,left:100};n.right=this.margin.right,n.left=this.margin.left;var o=this.width-n.left-n.right,s=this.height-n.top-n.bottom,i=c["D"]("#app").append("div").attr("class","tooltip").attr("height",100).style("opacity",0);function l(t,e){console.log(t),i.transition().duration(200).style("opacity",.9),i.html("选择:"+t["sub1"]+","+t["sub2"]+":"+t["value"].toString()).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px"),c["E"](".dot-"+t.mes_StudentID.toString()).attr("fill","#333"),vis.selectAll(".personLine").attr("opacity",.5)}function u(){i.transition().duration(500).style("opacity",0)}c["D"]("#twoChoose").selectAll("svg").remove().transition(100);var d=c["D"]("#twoChoose").append("svg").attr("width",o+n.left+n.right).attr("height",s+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")"),p=this.xScale;p.domain(t),p.range([0,o*e]),console.log(),d.append("g").attr("transform","translate(0,"+this.yScale.range()[0]+")").call(c["b"](p)).selectAll("text").style("font-size","15px");var h=this.yScale;d.append("g").attr("transform","translate(0,0)").call(c["c"](h)).selectAll("text").style("font-size","15px");var v=c["A"]().range(["#FCF7FC","#E7C0E8"]).domain([1,a]),f=c["A"]().range(["white","#d6eaf7"]).domain([1,a]);d.selectAll().data(this.twoChooseSex,function(t){return t.sub1+":"+t.sub2}).enter().append("rect").attr("x",function(t){return p(t.sub1)}).attr("y",function(t){return h(t.sub2)}).attr("rx",10).attr("ry",10).attr("width",p.bandwidth()).attr("height",h.bandwidth()).style("fill",function(t){return"girl"==t.sex?v(t.value):f(t.value)}).on("mouseover",l).on("mouseout",u)},getValue:function(t){var e=this;function a(t){return new Promise(function(e,a){setTimeout(e,t,"done")})}c["D"]("#barchart").selectAll("svg").transition().duration(1e3).style("opacity",0).remove().remove(),a(900).then(function(a){e.change(t)})},change:function(t){var e={};if("total"==t){e.cla_id="",e.cla_Name="总选课",e.threechoose=[{sub:"地理,技术,政治","男":"2","女":"5",total:"7"},{sub:"化学,地理,物理","男":"29","女":"9",total:"38"},{sub:"历史,技术,物理","男":"2","女":"0",total:"2"},{sub:"历史,物理,生物","男":"4","女":"4",total:"8"},{sub:"化学,政治,物理","男":"3","女":"11",total:"14"},{sub:"地理,技术,物理","男":"11","女":"7",total:"18"},{sub:"化学,技术,生物","男":"5","女":"7",total:"12"},{sub:"化学,技术,物理","男":"28","女":"5",total:"33"},{sub:"化学,历史,物理","男":"6","女":"2",total:"8"},{sub:"化学,历史,政治","男":"2","女":"7",total:"9"},{sub:"技术,物理,生物","男":"8","女":"6",total:"14"},{sub:"化学,物理,生物","男":"56","女":"19",total:"75"},{sub:"化学,政治,生物","男":"0","女":"20",total:"20"},{sub:"地理,物理,生物","男":"12","女":"17",total:"29"},{sub:"化学,历史,地理","男":"1","女":"3",total:"4"},{sub:"历史,政治,生物","男":"3","女":"11",total:"14"},{sub:"化学,历史,生物","男":"2","女":"12",total:"14"},{sub:"历史,地理,政治","男":"2","女":"5",total:"7"},{sub:"化学,地理,技术","男":"6","女":"2",total:"8"},{sub:"政治,物理,生物","男":"3","女":"10",total:"13"},{sub:"历史,地理,物理","男":"2","女":"1",total:"3"},{sub:"技术,政治,生物","男":"1","女":"6",total:"7"},{sub:"历史,地理,生物","男":"0","女":"8",total:"8"},{sub:"地理,政治,物理","男":"2","女":"5",total:"7"},{sub:"地理,政治,生物","男":"1","女":"12",total:"13"},{sub:"化学,地理,生物","男":"1","女":"14",total:"15"},{sub:"历史,地理,技术","男":"4","女":"2",total:"6"},{sub:"地理,技术,生物","男":"2","女":"6",total:"8"},{sub:"历史,政治,物理","男":"1","女":"1",total:"2"},{sub:"技术,政治,物理","男":"2","女":"2",total:"4"},{sub:"化学,地理,政治","男":"1","女":"8",total:"9"},{sub:"历史,技术,生物","男":"1","女":"2",total:"3"},{sub:"化学,历史,技术","男":"0","女":"2",total:"2"},{sub:"化学,技术,政治","男":"1","女":"0",total:"1"}],e.singlechoose=[{sub:"化学","男":"141","女":"121",total:"262"},{sub:"物理","男":"169","女":"99",total:"268"},{sub:"生物","男":"99","女":"154",total:"253"},{sub:"技术","男":"73","女":"52",total:"125"},{sub:"政治","男":"24","女":"103",total:"127"},{sub:"历史","男":"30","女":"60",total:"90"},{sub:"地理","男":"76","女":"104",total:"180"}],this.chooseData=[e];for(var a=0;a<this.chooseData.length;a++)this.maxx=300,this.drawSingle("#singlebarchart",this.subs,this.chooseData[a].singlechoose,this.chooseData[a].cla_id+""+this.chooseData[a].cla_Name,.5,300,.3),this.drawSingle("#threebarchart",this.choose,this.chooseData[a].threechoose,this.chooseData[a].cla_id+""+this.chooseData[a].cla_Name,.5,50,1);this.twoChoose=[{sub1:"地理",sub2:"技术",value:47,"男":25,"女":22},{sub1:"技术",sub2:"地理",value:47,"男":25,"女":22},{sub1:"地理",sub2:"政治",value:43,"男":8,"女":35},{sub1:"政治",sub2:"地理",value:43,"男":8,"女":35},{sub1:"技术",sub2:"政治",value:19,"男":6,"女":13},{sub1:"政治",sub2:"技术",value:19,"男":6,"女":13},{sub1:"化学",sub2:"地理",value:74,"男":38,"女":36},{sub1:"地理",sub2:"化学",value:74,"男":38,"女":36},{sub1:"化学",sub2:"物理",value:168,"男":122,"女":46},{sub1:"物理",sub2:"化学",value:168,"男":122,"女":46},{sub1:"地理",sub2:"物理",value:95,"男":56,"女":39},{sub1:"物理",sub2:"地理",value:95,"男":56,"女":39},{sub1:"历史",sub2:"技术",value:13,"男":7,"女":6},{sub1:"技术",sub2:"历史",value:13,"男":7,"女":6},{sub1:"历史",sub2:"物理",value:23,"男":15,"女":8},{sub1:"物理",sub2:"历史",value:23,"男":15,"女":8},{sub1:"技术",sub2:"物理",value:71,"男":51,"女":20},{sub1:"物理",sub2:"技术",value:71,"男":51,"女":20},{sub1:"历史",sub2:"生物",value:47,"女":37,"男":10},{sub1:"生物",sub2:"历史",value:47,"女":37,"男":10},{sub1:"物理",sub2:"生物",value:139,"女":56,"男":83},{sub1:"生物",sub2:"物理",value:139,"女":56,"男":83},{sub1:"化学",sub2:"政治",value:53,"女":46,"男":7},{sub1:"政治",sub2:"化学",value:53,"女":46,"男":7},{sub1:"政治",sub2:"物理",value:40,"女":29,"男":11},{sub1:"物理",sub2:"政治",value:40,"女":29,"男":11},{sub1:"化学",sub2:"技术",value:56,"女":16,"男":40},{sub1:"技术",sub2:"化学",value:56,"女":16,"男":40},{sub1:"化学",sub2:"生物",value:136,"女":72,"男":64},{sub1:"生物",sub2:"化学",value:136,"女":72,"男":64},{sub1:"技术",sub2:"生物",value:44,"女":27,"男":17},{sub1:"生物",sub2:"技术",value:44,"女":27,"男":17},{sub1:"化学",sub2:"历史",value:37,"女":26,"男":11},{sub1:"历史",sub2:"化学",value:37,"女":26,"男":11},{sub1:"历史",sub2:"政治",value:32,"女":24,"男":8},{sub1:"政治",sub2:"历史",value:32,"女":24,"男":8},{sub1:"政治",sub2:"生物",value:67,"女":59,"男":8},{sub1:"生物",sub2:"政治",value:67,"女":59,"男":8},{sub1:"地理",sub2:"生物",value:73,"女":57,"男":16},{sub1:"生物",sub2:"地理",value:73,"女":57,"男":16},{sub1:"历史",sub2:"地理",value:28,"女":19,"男":9},{sub1:"地理",sub2:"历史",value:28,"女":19,"男":9}],this.twoChooseSex=[{sex:"boy",sub1:"地理",sub2:"技术",value:25,"男":25,"女":22},{sex:"girl",sub1:"技术",sub2:"地理",value:22,"男":25,"女":22},{sex:"boy",sub1:"地理",sub2:"政治",value:8,"男":8,"女":35},{sex:"girl",sub1:"政治",sub2:"地理",value:35,"男":8,"女":35},{sex:"girl",sub1:"技术",sub2:"政治",value:13,"男":6,"女":13},{sex:"boy",sub1:"政治",sub2:"技术",value:6,"男":6,"女":13},{sex:"boy",sub1:"化学",sub2:"地理",value:38,"男":38,"女":36},{sex:"girl",sub1:"地理",sub2:"化学",value:36,"男":38,"女":36},{sex:"girl",sub1:"化学",sub2:"物理",value:46,"男":122,"女":46},{sex:"boy",sub1:"物理",sub2:"化学",value:122,"男":122,"女":46},{sex:"girl",sub1:"地理",sub2:"物理",value:39,"男":56,"女":39},{sex:"boy",sub1:"物理",sub2:"地理",value:56,"男":56,"女":39},{sex:"girl",sub1:"历史",sub2:"技术",value:6,"男":7,"女":6},{sex:"boy",sub1:"技术",sub2:"历史",value:7,"男":7,"女":6},{sex:"girl",sub1:"历史",sub2:"物理",value:8,"男":15,"女":8},{sex:"boy",sub1:"物理",sub2:"历史",value:15,"男":15,"女":8},{sex:"girl",sub1:"技术",sub2:"物理",value:20,"男":51,"女":20},{sex:"boy",sub1:"物理",sub2:"技术",value:51,"男":51,"女":20},{sex:"girl",sub1:"历史",sub2:"生物",value:37,"女":37,"男":10},{sex:"boy",sub1:"生物",sub2:"历史",value:10,"女":37,"男":10},{sex:"boy",sub1:"物理",sub2:"生物",value:83,"女":56,"男":83},{sex:"girl",sub1:"生物",sub2:"物理",value:56,"女":56,"男":83},{sex:"boy",sub1:"化学",sub2:"政治",value:7,"女":46,"男":7},{sex:"girl",sub1:"政治",sub2:"化学",value:46,"女":46,"男":7},{sex:"girl",sub1:"政治",sub2:"物理",value:29,"女":29,"男":11},{sex:"boy",sub1:"物理",sub2:"政治",value:11,"女":29,"男":11},{sex:"boy",sub1:"化学",sub2:"技术",value:40,"女":16,"男":40},{sex:"girl",sub1:"技术",sub2:"化学",value:16,"女":16,"男":40},{sex:"boy",sub1:"化学",sub2:"生物",value:64,"女":72,"男":64},{sex:"girl",sub1:"生物",sub2:"化学",value:72,"女":72,"男":64},{sex:"girl",sub1:"技术",sub2:"生物",value:27,"女":27,"男":17},{sex:"boy",sub1:"生物",sub2:"技术",value:17,"女":27,"男":17},{sex:"boy",sub1:"化学",sub2:"历史",value:11,"女":26,"男":11},{sex:"girl",sub1:"历史",sub2:"化学",value:26,"女":26,"男":11},{sex:"girl",sub1:"历史",sub2:"政治",value:24,"女":24,"男":8},{sex:"boy",sub1:"政治",sub2:"历史",value:8,"女":24,"男":8},{sex:"girl",sub1:"政治",sub2:"生物",value:59,"女":59,"男":8},{sex:"boy",sub1:"生物",sub2:"政治",value:8,"女":59,"男":8},{sex:"girl",sub1:"地理",sub2:"生物",value:57,"女":57,"男":16},{sex:"boy",sub1:"生物",sub2:"地理",value:16,"女":57,"男":16},{sex:"girl",sub1:"历史",sub2:"地理",value:19,"女":19,"男":9},{sex:"boy",sub1:"地理",sub2:"历史",value:9,"女":19,"男":9}],this.drawTwoChoose(.3,this.twoChooseSex,100),document.getElementById("threebarchart").style.marginTop=.2*this.height*7+"px",document.getElementById("singlebarchart").style.marginTop=.2*this.height*7+"px"}else{var r=this;I.a.get("http://cuteanian.top/eduvis/mock/classChooseData.json").then(function(t){r.chooseData=t.data.data,r.chooseData.sort(function(t,e){return parseInt(t.cla_id)-parseInt(e.cla_id)}),console.log(r.chooseData);for(var e=0;e<r.chooseData.length;e++)r.drawSingle("#singlebarchart",r.subs,r.chooseData[e].singlechoose,r.chooseData[e].cla_id+""+r.chooseData[e].cla_Name,.2,30,.3),r.drawSingle("#threebarchart",r.choose,r.chooseData[e].threechoose,r.chooseData[e].cla_id+""+r.chooseData[e].cla_Name,.2,10,1),document.getElementById("threebarchart").style.marginTop="0px",document.getElementById("singlebarchart").style.marginTop="0px"}),this.drawTwoChoose(.3,this.twoChooseSex,100)}},changeLinkType:function(){console.log(this.twoChoose),console.log(this.twoChooseSex),1==this.select_type?this.drawTwoChoose(.3,this.twoChooseSex,100):this.drawTwoChoose(.3,this.twoChoose,100)}}},Pt=Gt,Vt=(a("31d2"),Object(p["a"])(Pt,Mt,Ft,!1,null,null,null)),Xt=Vt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"cos"}},[a("div",{staticClass:"help"},[a("el-button",{attrs:{round:"",id:"helpbutton"}},[t._v("引导")])],1),a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal",router:""}},["/Cos"==this.$route.path?a("el-menu-item",{staticClass:"toprightcos",staticStyle:{width:"400px"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"输入需要查询消费情况的学生id",size:"media"},model:{value:t.studentid,callback:function(e){t.studentid=e},expression:"studentid"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.clickStudent},slot:"append"})],1)],1):t._e()],1),t._m(0),a("div",{staticStyle:{height:"50px"},attrs:{id:"hor"}},[a("div",{staticStyle:{height:"50px","margin-left":"-12px"},attrs:{id:"total"}},[a("svg",{staticClass:"axis"})]),a("div",{staticStyle:{height:"50px","margin-left":"125.5px"},attrs:{id:"day"}},[a("svg",{staticClass:"axis"})])]),a("div",{attrs:{id:"hor_color"}},[t.brushed?a("div",{staticClass:"procolormap"},[t._m(1)]):t._e(),t._m(2),t.brushed?a("div",{staticClass:"procolormap5"},[t._m(3)]):t._e()])],1)},Ht=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"totalCos"}},[a("div",{staticClass:"cosdiv"},[a("h5",{staticStyle:{"font-size":"15px"}},[t._v("日消费总额画像")]),a("div",{attrs:{id:"totalCos1"}})]),a("div",{staticClass:"cosdiv"},[a("div",{attrs:{id:"totalCos2"}}),a("h5",{staticStyle:{"font-size":"15px"}},[t._v("日消费画像")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"flex","justify-content":"center","flex-direction":"column"}},[a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#fee090"}},[a("a",[t._v("12.5")])]),a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#fdae61"}},[t._v("25")]),a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#f46d43"}},[t._v("37.5")]),a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#d73027"}},[t._v("50")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"hordiv"}},[a("div",{staticStyle:{"padding-left":"10px"},attrs:{id:"hor1"}}),a("div",{attrs:{id:"hor2"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"flex","justify-content":"center","flex-direction":"column"}},[a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#fee090"}},[a("a",[t._v("2.5")])]),a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#fdae61"}},[a("a",[t._v("5")])]),a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#f46d43"}},[a("a",[t._v("7.5")])]),a("div",{staticClass:"cosrect",staticStyle:{"background-color":"#d73027"}},[a("a",[t._v("10")])])])}],Zt=a("7bc8");a("d5ab");r["a"].prototype.axios=I.a,r["a"].use(n["a"]);var Jt=[{path:"/student",component:at}],Ut=new n["a"]({routes:Jt}),Qt={name:"cos",mounted:function(){var t=this,e=this;this.count=0,I.a.get("http://cuteanian.top/eduvis/mock/personCos5_test.json").then(function(t){e.cosData5=t.data,e.drawScatter("#totalCos2",e.cosData5.data)}),I.a.get("http://cuteanian.top/eduvis/mock/personCos.json").then(function(t){e.cosData=t.data,e.drawScatter("#totalCos1",e.cosData.data)}),I.a.get("http://cuteanian.top/eduvis/mock/date.json").then(function(t){e.datadic=t.data}),I.a.get("http://cuteanian.top/eduvis/mock/studentCos1.json").then(function(t){e.studentCos1=t.data}),I.a.get("http://cuteanian.top/eduvis/mock/studentCos5Class.json").then(function(t){e.studentCos5=t.data}),c["E"](".toprightchoose").remove(),c["E"](".classname").remove();var a=document.getElementsByClassName("toprightcos")[0],r=document.getElementsByClassName("el-menu-demo")[0];r.insertBefore(a,r.childNodes[5]);var n=document.getElementById("helpbutton");n.addEventListener("click",function(e){e.target;event.stopPropagation(),t.driver()})},data:function(){return{brushed:!1,studentid:"",count:0}},methods:{driver:function(){var t=new U.a({});t.defineSteps([{element:".toprightcos",popover:{title:"查询指定学生消费情况",position:"bottom"}},{element:"#totalCos1",popover:{title:"日消费总额画像",description:"<strong>图表描述</strong></br>每一个圆圈代表一个学生</br>蓝色男生，粉色女生，描边表示住校</br>具有相似日消费总额习惯的学生聚集在一起</br><strong>交互</strong></br>可框选查看学生具体消费情况",position:"bottom"}},{element:"#totalCos2",popover:{title:"日消费画像",description:"<strong>图表描述</strong></br>每一个圆圈代表一个学生</br>蓝色男生，粉色女生，描边表示住校</br>具有相似日消费习惯的学生聚集在一起</br><strong>交互</strong></br>可框选查看学生具体消费情况",position:"bottom"}}]),t.start()},driverCos:function(){var t=new U.a({});t.defineSteps([{element:"#hor1",popover:{title:"日消费总额详细信息",description:"<strong>图表描述</strong></br>横轴时间，纵轴消费金额</br>颜色从浅到深，每一种颜色最高高度所代表的消费总金额加12.5。最浅色最高高度代表日消费12.5元，最深色最高高度代表日消费50元。</br><strong>交互</strong></br>双击可进入学生个人主页",position:"top"}},{element:"#hor2",popover:{title:"日消费详细信息",description:"<strong>图表描述</strong></br>横轴一天内的时间，纵轴消费金额</br>颜色从浅到深，每一种颜色最高高度所代表的消费总金额加2.5。最浅色最高高度代表消费2.5元，最深色最高高度代表消费10元。</br><strong>交互</strong></br>双击可进入学生个人主页",position:"top"}}]),t.start()},drawScatter:function(t,e){var a=document.body.clientWidth,r={top:20,right:30,bottom:30,left:40},n=a/2.7-r.left-r.right,o=.2*window.innerWidth-r.top-r.bottom,s=c["A"]().range([0,n]),i=c["A"]().range([o,0]),l={"男":"#6d9ed9","女":"#f8d7d3"},u=(c["b"](s),c["c"](i),c["D"](t).append("svg").attr("width",n+r.left+r.right).attr("height",o+r.top+r.bottom).append("g").attr("transform","translate("+r.left+","+r.top+")"));e.forEach(function(t){t.sepalLength=+t.sepalLength,t.sepalWidth=+t.sepalWidth}),s.domain(c["l"](e,function(t){return t[0]})).nice(),i.domain(c["l"](e,function(t){return t[1]})).nice();var d=Zt["a"]().x(function(t){return s(t[0])}).y(function(t){return i(t[1])}).size([n-50,o]).bandwidth(25)(e);console.log(d);var p=c["A"]().range(["white","black"]).domain([0,.02]);u.append("g").attr("stroke-linejoin","round").selectAll("path").data(d).enter().append("path").attr("d",c["n"]()).attr("fill",function(t,e){return p(t.value)});u.selectAll(".dot").data(e).enter().append("circle").attr("class","non_brushed").attr("r",4).attr("cx",function(t){return s(t[0])}).attr("cy",function(t){return i(t[1])}).attr("stroke-width",2).attr("stroke",function(t){if(1==t[4])return"grey"}).style("fill",function(t,e){return l[t[3]]});"#totalCos2"==t&&u.attr("transform","rotate(180)scale(-1,1)translate(50,"+-(o+20)+")"),u.append("g").attr("class","brush").on("click",function(){c["E"]("circle").attr("opacity",1)}).call(c["e"]().extent([[0,0],[n,o]]).on("end",f));var h=this.draw,v=(this.drawAxisAllDay,this.drawAxisOneDay,this);function f(){if(v.brushed=!0,v.count+=1,c["D"]("#svgid").selectAll("#subTitle").remove(),c["k"].sourceEvent&&c["k"].selection){var e=c["k"].selection.map(s.invert),a=e.map(c["J"].round);a[0]>=a[1]&&(a[0]=c["J"].floor(e[0]),a[1]=c["J"].offset(a[0]));var r=[],n=c["f"](this),o=c["D"](t).selectAll("circle");o.filter(function(t){var e=c["D"](this).attr("cx"),a=c["D"](this).attr("cy");b(n,e,a)&&r.push(t[2])}).attr("class","brushed"),h(r,"#hor1",v.studentCos1,50),h(r,"#hor2",v.studentCos5,10),1==v.count&&v.driverCos(),v.drawAxisOneDay(),v.drawAxisAllDay(),console.log(v.count),m(r)}}function b(t,e,a){var r=t[0][0],n=t[1][0],o=t[0][1],s=t[1][1];return r<=e&&e<=n&&o<=a&&a<=s}function m(t){c["E"]("circle").attr("opacity",function(e,a){var r=e[2].toString();return t.indexOf(r)>=0?1:.3}),0==t.length&&c["E"]("circle").attr("opacity",1)}},drawAxisAllDay:function(){c["D"]("#total").select(".axis").selectAll("svg").remove();var t=new Date("7/1/2018"),e=new Date("2/1/2019"),a=parseInt((e-t)/864e5),r=["7/1/18","8/1/18","9/1/18","10/1/18","11/1/18","12/1/18","1/1/19","2/1/19","3/1/19"],n=c["K"]("%Y/%m/%d"),o=216*parseInt(document.body.clientWidth/700),s=(c["A"]().domain([0,a]).range([0,.8*o]),c["C"]().domain([t,e]).range([0,o])),i=c["D"]("#total").select(".axis").attr("width",o).attr("height",50);i.append("g").call(c["b"](s).tickFormat(n).tickValues(r.map(function(t){return new Date(t)}))).selectAll("text").attr("transform","rotate(-30)translate(10,15)"),i.selectAll("path").attr("transform","translate(0,40)"),i.selectAll("line").attr("transform","translate(0,40)")},drawAxisOneDay:function(){var t=new Date("00:00:00 7/1/2018"),e=new Date("23:59:59 7/1/2018"),a=parseInt((e-t)/36e5)+1,r=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],n=288*parseInt(document.body.clientWidth/700),o=c["A"]().domain([0,a]).range([0,n]),s=c["b"]().scale(o).tickValues(r.map(function(t){return t})),i=c["D"]("#day").select(".axis").attr("width",n).attr("height",50);i.append("g").call(s),i.selectAll("path").attr("transform","translate(0,40)"),i.selectAll("line").attr("transform","translate(0,40)")},draw:function(t,e,a,r){c["D"](e).selectAll("div").remove();var n={};function o(t,e){var a=t.split("-"),r=e.split("-"),o=new Date;o.setUTCFullYear(a[0],a[1]-1,a[2]);var s=new Date;s.setUTCFullYear(r[0],r[1]-1,r[2]);for(var i=o.getTime(),l=s.getTime(),c=0,u=i;u<=l;){var d=new Date(parseInt(u)).format();n[d]=c,c+=1,u+=864e5}}Date.prototype.format=function(){var t="",e=this.getMonth()+1>=10?this.getMonth()+1:"0"+(this.getMonth()+1),a=this.getDate()>=10?this.getDate():"0"+this.getDate();return t+=this.getFullYear()+"-",t+=e+"-",t+=a,t},o("2018-07-01","2019-03-31"),t.forEach(function(t){var n=[];a[t]["data"].forEach(function(t){t<0&&(t=0-t),n.push(t)}),i(n,"#hor2"==e?t+"_"+a[t]["bf_zhusu"]+"_"+a[t]["sex"]+"_"+a[t]["cla_Name"]:t+"_"+a[t]["bf_zhusu"]+"_"+a[t]["sex"],e,r)});var s=c["D"]("#svgid").attr("height",54*t.length).append("g").attr("id","subTitle");function i(t,e,a){var n,o=c["D"]("#app").append("div").attr("class","tooltip").style("opacity",0);if("#totalCos1"==a){var s=new Date("7/1/2018"),i=new Date("2/1/2019"),l=parseInt((i-s)/864e5);n=274*parseInt(document.body.clientWidth/700)}else{s=new Date("00:00:00 7/1/2018"),i=new Date("23:59:59 7/1/2018"),l=parseInt((i-s)/36e5);n=288*parseInt(document.body.clientWidth/700)}var u=c["A"]().domain([0,l]).range([0,n]),d=M["horizonChart"]().height(50).step(parseInt(document.body.clientWidth/700)).extent([0,r]).title(function(t){if("#hor2"==a){var r=e.split("_");return"0"==r[1]?r[0]+","+r[2]+","+r[3]+",走读":r[0]+","+r[2]+","+r[3]+",住校"}}).axis(u).colors(["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"]),p=e.split("_")[0];c["D"](a).selectAll(".horizon"+p).data([t]).enter().append("div").attr("class","horizon"+p).attr("studentid",p).each(d);if(c["E"](".horizon"+p).on("mouseover",function(t,a){o.transition().duration(200).style("opacity",.9);var r=e.split("_")[1],n="";n=r>=1?e.split("_")[0]+"住校"+e.split("_")[2]+"<br/>双击查看学生个人主页":e.split("_")[0]+"走读"+e.split("_")[2]+"<br/>双击查看学生个人主页",o.html(n).style("left",c["k"].pageX+"px").style("top",c["k"].pageY-28+"px")}).on("mouseout",function(t,e){o.transition().duration(500).style("opacity",0)}).on("dblclick",function(t,a){Ut.push({path:"/student",query:{studentId:e.split("_")[0]}}),Ut.go()}),"#hor1"==a)c["E"](".title").remove();else for(var h=document.getElementsByClassName("title"),v=0;v<h.length;v++){var f=h[v],b=f.parentNode.getElementsByTagName("canvas")[0];f.parentNode.insertBefore(f,b)}}s.selectAll("studenid").data(t).enter().append("text").attr("fill","black").attr("font-size","10px").attr("text-anchor","middle").attr("x",20).attr("y",function(t,e){return 54*e}).attr("dx","1em").attr("dy",25).text(function(t){return t})},clickStudent:function(t){var e=[this.studentid],a=this.draw;this.drawAxisOneDay(),this.drawAxisAllDay(),this.brushed=!0,this.count+=1,a(e,"#hor1",this.studentCos1,50),a(e,"#hor2",this.studentCos5,10),console.log(this.count),1==this.count&&(event.stopPropagation(),this.driverCos())}}},te=Qt,ee=(a("92f7"),Object(p["a"])(te,Kt,Ht,!1,null,"9c410db2",null)),ae=ee.exports,re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"help"},[a("el-button",{attrs:{round:"",id:"helpbutton"}},[t._v("引导")])],1),a("el-container",[a("el-container",[a("el-aside",{attrs:{width:"400px"}},[a("div",[a("div",{staticClass:"excel"}),a("div",{staticClass:"totalIntro"},[a("h3",[t._v("设计概述")]),a("p",[t._v("EduVis将分析任务依据群体层次（年级、班级、个人）及数据类型（成绩、考勤、选课、消费）投影到五个页面（A, B, C, D, E）且各页面相互关联")]),a("h3",[t._v("设计亮点")]),a("p",[t._v("1.\t深度结合数据特征及分析特点设计可视化技术，而不是已有图表类型的堆砌组合；"),a("br"),t._v("\n                            2.\t各页面与各视图高度融合，相互关联，交互性强，支持图表下钻；"),a("br"),t._v("\n                            3.\t引导式设计帮助用户自己探索发现结论，而不是分析结果的直接呈现；"),a("br"),t._v("\n                            4.\t结合机器学习算法让分析更加智能，包括数据聚类，相关性分析及预测分析。")])])])]),a("el-main",{staticStyle:{},attrs:{align:"middle"}},[a("div",{attrs:{id:"main"}},[a("el-row",{attrs:{id:"aa0"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"graphDiv"},[a("h3",[t._v("成绩/考勤 年级"),a("br")]),a("img",{staticClass:"infoGraph",attrs:{src:"http://cuteanian.top/eduvis/mock/A.png"}})])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"info"},[a("p",[t._v("1.各年级各班的考勤分布查看、考勤整体排行，支持时间段检索；"),a("br"),t._v("\n                                2.各班级不同科目的成绩分布及排名趋势变化，支持不同指标、班级及老师检索；"),a("br"),t._v("\n                                3.成绩与考勤视图支持关联分析\n                                ")])])])],1),a("el-row",{attrs:{id:"aa1"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"graphDiv"},[a("h3",[t._v("成绩/考勤 班级"),a("br")]),a("img",{staticClass:"infoGraph",attrs:{src:"http://cuteanian.top/eduvis/mock/B.png"}})])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"info"},[a("p",[t._v("\n                                    1.\t同班各学生的考勤分布查看、考勤个人排行，支持时间段检索；"),a("br"),t._v("\n                                    2.\t同班各学生各科目的成绩排名分布及趋势变化，支持寝室及学生ID检索；"),a("br"),t._v("\n                                    3.\t成绩与考勤视图支持关联分析\n                                ")])])])],1),a("el-row",{attrs:{id:"aa2"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"graphDiv"},[a("h3",[t._v("选课")]),a("img",{staticClass:"infoGraph",attrs:{src:"http://cuteanian.top/eduvis/mock/C.png"}})])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"info"},[a("p",[t._v("1.\t全体学生七选三选课分布，支持三科重叠、二科重叠"),a("br"),t._v("\n                                    2.\t选课分布按班级及性别进行分析")])])])],1),a("el-row",{attrs:{id:"aa3"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"graphDiv"},[a("h3",[t._v("消费"),a("br")]),a("img",{staticClass:"infoGraph",attrs:{src:"http://cuteanian.top/eduvis/mock/D.png"}})])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"info"},[a("p",[t._v("1.\t全体学生日消费总额画像及日消费画像，依据消费习惯进行投影聚类"),a("br"),t._v("\n                                    2.\t支持用户自由探索不同群体的消费习惯，帮助发现贫困生及预警消费\n                                ")])])])],1),a("el-row",{attrs:{id:"aa4"}},[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"graphDiv"},[a("h3",[t._v("个人信息"),a("br")]),a("img",{staticClass:"infoGraph",attrs:{src:"http://cuteanian.top/eduvis/mock/E.png"}})])]),a("el-col",{attrs:{span:16}},[a("div",{staticClass:"info"},[a("p",[t._v("1.\t个人历史成绩展示，支持不同科目不同指标，支持成绩预测；"),a("br"),t._v("\n                                    2.\t消费历史记录展示，包括月消费画像、周消费画像及日消费画像；"),a("br"),t._v("\n                                    3.\t个人学科偏科评估，支持按总体、期中、期末进行评估；"),a("br"),t._v("\n                                    4.\t其它信息展示评估，包括基本信息展示，成绩、消费与考勤评估\n                                ")])])])],1)],1)])],1),a("el-footer")],1)],1)},ne=[],oe=a("a5f0"),se={name:"menu",mounted:function(){var t=this,e=(document.body.clientWidth,{top:40,right:40,bottom:0,left:0}),a=.18*window.innerWidth,r=.18*window.innerWidth,n=c["D"](".excel").append("svg").attr("width",a+e.left+e.right).attr("height",r+e.top+e.bottom),o=n.append("g").attr("transform","translate("+e.left+","+e.top+")"),s=n.append("g").attr("transform","translate("+e.left+","+e.top+")"),i=(n.append("g").attr("transform","translate("+e.left+","+e.top+")"),(a-e.right)/3-20),l=(r-e.top)/3-20;this.rectwidth=i,this.rectheight=l;var u=[0,1,2,3,4],d=["A","B","C","D","E"],p=function(t){document.getElementById("aa"+t.toString()).style.backgroundColor="#d3dce5"},h=function(t){for(var e=0;e<5;e++)document.getElementById("aa"+e.toString()).style.backgroundColor="#e9eef3"};o.selectAll("rect").data(u).enter().append("rect").attr("height",function(t,e){var a=[0,1,4];return a.indexOf(e)>=0?l:2*(l+10)}).attr("width",function(t,e){return e<4?i:3*(i+13)}).attr("fill","#f5f7fa").attr("rx",10).attr("ry",10).attr("x",function(t,a){var r=[0,1,4];return r.indexOf(a)>=0?e.right:(a-1)*(i+20)+e.right}).attr("y",function(t,e){var a=[0,2,3];return a.indexOf(e)>=0?0:1==e?l+20:4==e?2*(l+20):void 0}).on("mouseover",p).on("mouseout",h);var v=["成绩/考勤","选课","消费","年级","班级","个人"];s.selectAll("text").data(d).enter().append("text").text(function(t){return t}).attr("id",function(t){return t}).attr("x",function(t,a){var r=[1,2];return r.indexOf(a)>=0?a*(i+20)+i/3+e.right:3==a?e.right+i/2:4==a?e.right+1.5*i:0==a?e.right+i/2.5:void 0}).attr("y",function(t,a){return 3==a?e.top+1.3*l:4==a?2*l+e.top+l/2:0==a?l/2:l}).style("font-size","20px").attr("fill","grey"),o.selectAll("text").data(v).enter().append("text").text(function(t){return t}).attr("x",function(t,a){var r=[1,2];return r.indexOf(a)>=0?a*(i+20)+i/3+e.right:0==a?e.right:void 0}).attr("y",function(t,a){return 3==a?e.top:4==a?l+e.top+l/3:5==a?2*l+e.top+l/2:-10}).style("font-size","14px").attr("fill","grey"),this.drawArrow();var f=document.getElementById("helpbutton");f.addEventListener("click",function(e){e.target;event.stopPropagation(),t.help()})},methods:{help:function(){var t=new U.a({});t.defineSteps([{element:"#a1",popover:{title:"系统介绍",position:"bottom"}},{element:"#a2",popover:{title:"进入成绩/考勤页面",position:"bottom"}},{element:"#a3",popover:{title:"进入选课页面",position:"bottom"}},{element:"#a4",popover:{title:"进入消费页面",position:"bottom"}},{element:".input",popover:{title:"输入学生id进入学生主页",position:"bottom"}}]),t.start()},drawArrow:function(){oe["a"].annotationLabel;var t=[{note:{},connector:{end:"arrow"},x:c["D"]("#D").attr("x"),y:c["D"]("#D").attr("y"),ny:c["D"]("#A").attr("y"),nx:c["D"]("#A").attr("x")},{note:{},connector:{end:"arrow"},x:c["D"]("#D").attr("x"),y:c["D"]("#D").attr("y"),ny:c["D"]("#B").attr("y"),nx:c["D"]("#B").attr("x")},{note:{},connector:{end:"arrow"},x:c["D"]("#E").attr("x"),y:c["D"]("#E").attr("y"),ny:c["D"]("#C").attr("y"),nx:c["D"]("#C").attr("x")},{note:{},connector:{end:"arrow"},x:c["D"]("#E").attr("x"),y:c["D"]("#E").attr("y"),ny:c["D"]("#D").attr("y"),nx:c["D"]("#D").attr("x")}].map(function(t){return t.color="#8da0cb",t}),e=oe["a"].annotation().type(oe["a"].annotationLabel).annotations(t);c["D"]("svg").append("g").attr("class","annotation-group").call(e).attr("transform","translate(0,30)")}}},ie=se,le=(a("80b5"),Object(p["a"])(ie,re,ne,!1,null,null,null)),ce=le.exports,ue=a("05e3"),de=a.n(ue);a("c467");r["a"].use(de.a),r["a"].use(n["a"]),r["a"].directive("move",{inserted:function(t){t.onmousedown=function(e){var a=e.clientX-t.offsetLeft,r=e.clientY-t.offsetTop;t.setCapture&&t.setCapture(),document.onmousemove=function(e){e.preventDefault();var n=e.clientX-a,o=e.clientY-r;n=Math.min(Math.max(n,0),document.documentElement.clientWidth-t.offsetWidth),o=Math.min(Math.max(o,0),document.documentElement.clientHeight-t.offsetHeight),t.style.left=n+"px",t.style.top=o+"px"},document.onmouseup=function(){document.onmousemove=document.onmousedown=null,t.releaseCapture&&t.releaseCapture()}}}});var pe=[{path:"/Home",component:Ot},{path:"/Choose",component:Xt},{path:"/Class",component:bt},{path:"/student",component:at},{path:"/cos",component:ae},{path:"*",component:ce},{path:"menu",component:ce}],he=new n["a"]({routes:pe});new r["a"]({router:he,render:function(t){return t(kt)}}).$mount("#app")},"60b6":function(t,e,a){"use strict";var r=a("bd6d"),n=a.n(r);n.a},6424:function(t,e,a){},"6f34":function(t,e,a){},"80b5":function(t,e,a){"use strict";var r=a("8694"),n=a.n(r);n.a},8694:function(t,e,a){},"92f7":function(t,e,a){"use strict";var r=a("3932"),n=a.n(r);n.a},"96c2":function(t,e,a){t.exports=a.p+"img/girl.002a2bd2.png"},"9b42":function(t,e,a){},"9e74":function(t,e,a){},a427:function(t,e,a){"use strict";var r=a("4dc8"),n=a.n(r);n.a},a4db:function(t,e,a){"use strict";var r=a("6424"),n=a.n(r);n.a},a5c4:function(t,e,a){},a619:function(t,e,a){"use strict";var r=a("a5c4"),n=a.n(r);n.a},af66:function(t,e,a){"use strict";var r=a("9b42"),n=a.n(r);n.a},b08a:function(t,e,a){},b16e:function(t,e,a){t.exports=a.p+"img/boy.994b3801.png"},bd18:function(t,e,a){"use strict";(function(t){a("46b7"),a("fb59"),a("e71a"),a("1b79");var r=a("c5cf"),n=(a("63e0"),a("6e6d")),o=a("7f43"),s=a.n(o);n["a"].prototype.axios=s.a,e["a"]={name:"studentKq",props:["studentId"],mounted:function(){var t=this;s.a.get("http://cuteanian.top/eduvis/mock/studentkqd.json").then(function(e){t.studentkq=e.data,t.getdata()})},methods:{getdata:function(){var t=this.studentkq[this.studentId];this.draw(t)},draw:function(e){var a=6,n=20,o=2*a*36,s=2*a*15+n,i=2016,l=9,c=2019,u=6,d={1001:{info:"迟到_晚到",index:0},1002:{info:"校徽_早退",index:1},1003:{info:"操场考勤机",index:2},99001:{info:"迟到[移动考勤机]",index:3},99002:{info:"校服[移动考勤机]",index:4},99003:{info:"早退[移动考勤机]",index:5},99004:{info:"离校[移动考勤机]",index:6},99005:{info:"进校[移动考勤机]",index:7}},p=["#8dd3c7","#ffffb3","#bebada","#fbd462","#80b1d3","#fb8072","#b3de69","#fccde5"],h={100000:"默认信息",100100:"早上迟到",100200:"晚到学校",100300:"晚自修迟到",200000:"默认信息",200100:"校徽校服",200200:"请假离校",300000:"默认信息",300100:"住宿早晨锻炼",300200:"课间操请假",9900100:"默认信息",9900200:"默认信息",9900300:"默认信息",9900400:"离校考勤",9900500:"进校考勤"};console.log(.4*window.innerWidth),document.getElementById("kqvis").style.width=.4*window.innerWidth-40+"px";var v=r["D"]("#kqvis").append("svg").attr("width",o).attr("height",s),f=r["D"]("#legend").append("svg").attr("width",160).attr("height",330),b=v.append("g"),m=v.append("g"),g=r["D"]("body").append("div").attr("class","tooltip").style("opacity",0);function y(t){if(void 0!=t){t.forEach(function(t){var e=t.DataDateTime.split("/"),a=parseInt(e[0]),r=parseInt(e[1]),n=parseInt(e[2].split(" ")[0]),o=e[2].split(" ")[1];t.year=a,t.month=r,t.date=n,t.time=o}),t.sort(function(t,e){return t.year!=e.year?t.year-e.year:t.month!=e.month?t.month-e.month:t.ControllerID-e.ControllerID});var e=0,a=i,r=l;t.forEach(function(t){t.x=12*(t.year-i)+(t.month-l),a==t.year&&r==t.month||(e=0),t.y=e,e+=1,a=t.year,r=t.month})}}function x(t){var e=function(t){g.transition().duration(200).style("opacity",.9);var e="日期: ".concat(t.DataDateTime," <br/> 信息: ").concat(h[t.control_task_order_id]);g.html(e).style("left",r["k"].pageX+"px").style("top",r["k"].pageY-100+"px")},o=function(t){g.transition().duration(500).style("opacity",0)};m.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").attr("cx",function(t){return t.x*a*2+a}).attr("cy",function(t){return s-t.y*a*2-a-n}).attr("r",a).attr("fill",function(t){return p[d[t.ControllerID].index]}).on("mouseover",e).on("mouseout",o)}function _(){var t=l,e=i,r=[];while(e!=c||t!=u)r.push(t),t+=1,t>12&&(e+=1,t=1);r.push(u),b.selectAll(".monthtext").data(r).enter().append("text").attr("class","monthtext").attr("font-size","8px").attr("text-anchor","middle").attr("x",function(t,e){return 2*a*e}).attr("y",s-n+a).attr("dx",a).attr("dy","0.5em").text(function(t){return t});var o=[];t=l,e=i;while(e<c)o.push({x1:12*(e-i)+(t-l),x2:12*(e-i)+(t-l)+(12-t),year:e}),t=1,e+=1;e==c&&o.push({x1:12*(e-i)+(t-l),x2:12*(e-i)+(t-l)+(u-t),year:e}),b.selectAll(".back").data(o).enter().append("rect").attr("class","back").attr("x",function(t){return t.x1*a*2}).attr("y",0).attr("width",function(t){return(t.x2-t.x1+1)*a*2}).attr("height",s-n).attr("fill",function(t){return(t.year-i)%2==0?"#eee":"#fff"}),b.selectAll(".year").data(o).enter().append("text").attr("class","year").attr("font-size","8px").attr("text-anchor","left").attr("x",function(t){return t.x1*a*2}).attr("y",0).attr("dy","1em").text(function(t){return t.year})}function k(){var t=[];for(var e in d)t.push(d[e]);void 0!=t&&(f.selectAll(".kq").data(t).enter().append("text").attr("font-size","10px").attr("text-anchor","left").attr("x",0).attr("y",function(t,e){return 20*(e+.4)}).attr("dy","0.5em").text(function(t){return t.info}),f.selectAll(".dot").data(t).enter().append("rect").attr("x",15*a).attr("y",function(t,e){return 20*e}).attr("width",19).attr("height",19).attr("r",a).attr("fill",function(t){return p[t.index]}))}function w(e){r["D"]("#student").selectAll("option").data(r["p"](e)).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}).style("font-size","18px"),t("#student").change(function(){var a=t(this).find("option:selected").attr("value");m.selectAll(".dot").remove();var r=e[a];y(r),x(r)})}w(this.studentkq),k(),y(e),console.log(e),_(),x(e)}}}}).call(this,a("a65c"))},bd6d:function(t,e,a){},c10f:function(t,e,a){"use strict";var r=a("cd62"),n=a.n(r);n.a},cd56:function(t,e,a){"use strict";var r=a("b08a"),n=a.n(r);n.a},cd62:function(t,e,a){},d9c0:function(t,e,a){},f98e:function(t,e,a){"use strict";var r=a("099f"),n=a.n(r);n.a}});
//# sourceMappingURL=app.91939861.js.map